name: Blog Deploy
on:
  push:
    branches:
      - master
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v3

      - name: Install and Build ğŸ”§
        run: |
          npm install
          npm run clean
          npm run build

      - name: Deploy ğŸš€
        env:
          # Github ä»“åº“
          GITHUB_REPO: github.com/MarkShen1992/markshen1992.github.io
        # å°†ç¼–è¯‘åçš„åšå®¢æ–‡ä»¶æ¨é€åˆ°æŒ‡å®šä»“åº“
        run: |
          cd ./public
          git init
          git config user.name "shenjunyu"
          git config user.email "18009838166@163.com"
          git add .
          git commit -m "GitHub Actions Auto Builder at $(date +'%Y-%m-%d %H:%M:%S')"
          git push --force --quiet "https://${{ secrets.ACCESS_TOKEN }}@$GITHUB_REPO" main:main
