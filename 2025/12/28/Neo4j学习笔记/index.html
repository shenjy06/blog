<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Neo4j 的简介 Neo4j 存储的数据元素包括节点 、连接节点的边以及节点和边的属性。其开发者将其描述为符合 ACID 标准的事务型数据库，并具备原生图存储和处理功能。 Neo4j 提供非开源的 “社区版”，该版本采用 GNU 通用公共许可证的修改版授权；此外，它还提供在线备份和高可用性扩展，这些扩展采用闭源商业许可证授权。 Neo 也以闭源商业条款授权 Neo4j 及其这些扩展。 官网：ht">
<meta property="og:type" content="article">
<meta property="og:title" content="Neo4j 学习笔记">
<meta property="og:url" content="https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Mark&#39;s Blog">
<meta property="og:description" content="Neo4j 的简介 Neo4j 存储的数据元素包括节点 、连接节点的边以及节点和边的属性。其开发者将其描述为符合 ACID 标准的事务型数据库，并具备原生图存储和处理功能。 Neo4j 提供非开源的 “社区版”，该版本采用 GNU 通用公共许可证的修改版授权；此外，它还提供在线备份和高可用性扩展，这些扩展采用闭源商业许可证授权。 Neo 也以闭源商业条款授权 Neo4j 及其这些扩展。 官网：ht">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-12-28T19:54:30.000Z">
<meta property="article:modified_time" content="2026-01-13T09:10:50.787Z">
<meta property="article:author" content="Mark Shen">
<meta property="article:tag" content="Neo4j">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/blog/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/blog/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Neo4j 学习笔记</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/blog/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
      <link rel="alternate" href="/blog/true" title="Mark&#39;s Blog" type="application/atom+xml" />
    
	<!-- mathjax -->
	
		<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			  inlineMath: [['$','$']]
			}
		  });
		</script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
	
<meta name="generator" content="Hexo 5.4.2"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="目录"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="目录"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="顶部" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/blog/">首页</a></li><!--
     --><!--
       --><li><a href="/blog/about/">关于</a></li><!--
     --><!--
       --><li><a href="/blog/archives/">归档</a></li><!--
     --><!--
       --><li><a href="/blog/categories/">分类</a></li><!--
     --><!--
       --><li><a href="/blog/search/">搜索</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/shenjy06">项目</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="上一篇" href="/blog/2026/01/10/python_note/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="下一篇" href="/blog/2025/12/18/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="返回顶部" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="分享文章" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&text=Neo4j 学习笔记"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=Neo4j 学习笔记"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&is_video=false&description=Neo4j 学习笔记"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Neo4j 学习笔记&body=Check out this article: https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=Neo4j 学习笔记"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=Neo4j 学习笔记"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=Neo4j 学习笔记"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=Neo4j 学习笔记"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&name=Neo4j 学习笔记&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&t=Neo4j 学习笔记"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Neo4j-%E7%9A%84%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">Neo4j 的简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">底层原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">3.</span> <span class="toc-text">使用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E3%80%8C%E4%B8%80%E5%AE%9A%E8%A6%81%E3%80%8D%E8%80%83%E8%99%91-Neo4j%EF%BC%9F"><span class="toc-number">3.1.</span> <span class="toc-text">一、什么时候「一定要」考虑 Neo4j？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-%E6%95%B0%E6%8D%AE%E7%9A%84%E3%80%8C%E5%85%B3%E7%B3%BB%E3%80%8D%E6%AF%94%E3%80%8C%E6%95%B0%E6%8D%AE%E6%9C%AC%E8%BA%AB%E3%80%8D%E6%9B%B4%E9%87%8D%E8%A6%81"><span class="toc-number">3.1.1.</span> <span class="toc-text">1️⃣ 数据的「关系」比「数据本身」更重要</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-%E9%9C%80%E8%A6%81%E9%A2%91%E7%B9%81%E5%81%9A%E3%80%8C%E5%A4%9A%E8%B7%B3%E5%85%B3%E7%B3%BB%E6%9F%A5%E8%AF%A2%E3%80%8D%EF%BC%882-%E8%B7%B3%E3%80%813-%E8%B7%B3%E3%80%81N-%E8%B7%B3%EF%BC%89"><span class="toc-number">3.1.2.</span> <span class="toc-text">2️⃣ 需要频繁做「多跳关系查询」（2 跳、3 跳、N 跳）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3-%E5%85%B3%E7%B3%BB%E6%95%B0%E9%87%8F%E5%B7%A8%E5%A4%A7%EF%BC%8C%E4%B8%94%E8%BF%9C%E5%A4%A7%E4%BA%8E%E5%AE%9E%E4%BD%93%E6%95%B0%E9%87%8F"><span class="toc-number">3.1.3.</span> <span class="toc-text">3️⃣ 关系数量巨大，且远大于实体数量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%B8%8F%E2%83%A3-%E5%85%B3%E7%B3%BB%E7%B1%BB%E5%9E%8B%E5%A4%9A%E3%80%81%E7%BB%8F%E5%B8%B8%E5%8F%98%E5%8C%96"><span class="toc-number">3.1.4.</span> <span class="toc-text">4️⃣ 关系类型多、经常变化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%B8%8F%E2%83%A3-%E9%9C%80%E8%A6%81%E5%81%9A%E3%80%8C%E5%85%B3%E7%B3%BB%E6%8E%A8%E7%90%86-%E5%9B%BE%E7%AE%97%E6%B3%95%E3%80%8D"><span class="toc-number">3.1.5.</span> <span class="toc-text">5️⃣ 需要做「关系推理 &#x2F; 图算法」</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%B8%8F%E2%83%A3-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%A4%A9%E7%84%B6%E6%98%AF%E3%80%8C%E5%9B%BE%E3%80%8D"><span class="toc-number">3.1.6.</span> <span class="toc-text">6️⃣ 数据结构天然是「图」</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%9C%80%E5%85%B8%E5%9E%8B%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%88%E9%AB%98%E5%91%BD%E4%B8%AD%EF%BC%89"><span class="toc-number">3.2.</span> <span class="toc-text">二、最典型的使用场景（高命中）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-1-%E7%A4%BE%E4%BA%A4%E7%BD%91%E7%BB%9C"><span class="toc-number">3.2.1.</span> <span class="toc-text">🔹 1. 社交网络</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-2-%E9%A3%8E%E6%8E%A7-%E5%8F%8D%E6%AC%BA%E8%AF%88%EF%BC%88%E9%9D%9E%E5%B8%B8%E9%80%82%E5%90%88%EF%BC%89"><span class="toc-number">3.2.2.</span> <span class="toc-text">🔹 2. 风控 &#x2F; 反欺诈（非常适合）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-3-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%EF%BC%88%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-number">3.2.3.</span> <span class="toc-text">🔹 3. 推荐系统（关系型推荐）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-4-%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1"><span class="toc-number">3.2.4.</span> <span class="toc-text">🔹 4. 知识图谱</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-5-IT-%E8%BF%90%E7%BB%B4-%E6%8B%93%E6%89%91-%E4%BE%9D%E8%B5%96%E5%88%86%E6%9E%90"><span class="toc-number">3.2.5.</span> <span class="toc-text">🔹 5. IT 运维 &#x2F; 拓扑 &#x2F; 依赖分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-6-%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90-%E4%BE%9D%E8%B5%96%E5%9B%BE"><span class="toc-number">3.2.6.</span> <span class="toc-text">🔹 6. 代码分析 &#x2F; 依赖图</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E3%80%8C%E4%B8%8D%E8%AF%A5%E3%80%8D%E7%94%A8-Neo4j%EF%BC%9F"><span class="toc-number">3.3.</span> <span class="toc-text">三、什么时候「不该」用 Neo4j？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9D%8C-1-%E7%BA%AF-CRUD-%E8%A1%A8%E7%BB%93%E6%9E%84%E7%A8%B3%E5%AE%9A"><span class="toc-number">3.3.1.</span> <span class="toc-text">❌ 1. 纯 CRUD + 表结构稳定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9D%8C-2-%E5%A4%A7%E9%87%8F%E8%81%9A%E5%90%88-%E6%8A%A5%E8%A1%A8-OLAP"><span class="toc-number">3.3.2.</span> <span class="toc-text">❌ 2. 大量聚合 &#x2F; 报表 &#x2F; OLAP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9D%8C-3-%E5%8F%AA%E6%98%AF%E2%80%9C%E6%9C%89%E5%A4%96%E9%94%AE%E2%80%9D%EF%BC%8C%E4%BD%86%E4%B8%8D%E9%9C%80%E8%A6%81%E5%A4%9A%E8%B7%B3"><span class="toc-number">3.3.3.</span> <span class="toc-text">❌ 3. 只是“有外键”，但不需要多跳</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9D%8C-4-%E5%BC%BA%E4%BA%8B%E5%8A%A1-%E9%AB%98%E5%B9%B6%E5%8F%91%E5%86%99%E5%85%A5"><span class="toc-number">3.3.4.</span> <span class="toc-text">❌ 4. 强事务 + 高并发写入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E5%86%B3%E7%AD%96%E5%8F%A3%E8%AF%80"><span class="toc-number">3.4.</span> <span class="toc-text">四、一个简单的决策口诀</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E7%BB%99%E4%BD%A0%E4%B8%80%E4%B8%AA%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE%EF%BC%88%E5%BE%88%E9%87%8D%E8%A6%81%EF%BC%89"><span class="toc-number">3.5.</span> <span class="toc-text">五、给你一个工程实践建议（很重要）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">4.</span> <span class="toc-text">对比关系型数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">5.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cypher-%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80"><span class="toc-number">6.</span> <span class="toc-text">Cypher 查询语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%8A%82%E7%82%B9-CREATE"><span class="toc-number">6.1.</span> <span class="toc-text">创建节点 CREATE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E7%B4%A2%E8%AF%AD%E5%8F%A5-MATCH"><span class="toc-number">6.2.</span> <span class="toc-text">检索语句 MATCH</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RETURN-%E8%BF%94%E5%9B%9E"><span class="toc-number">6.3.</span> <span class="toc-text">RETURN 返回</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%85%B3%E7%B3%BB-CREATE"><span class="toc-number">6.4.</span> <span class="toc-text">创建关系 CREATE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WHERE-%E6%9D%A1%E4%BB%B6"><span class="toc-number">6.5.</span> <span class="toc-text">WHERE 条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E5%B7%B2%E6%9C%89%E7%9A%84%E8%8A%82%E7%82%B9%E6%B7%BB%E5%8A%A0%E5%85%B3%E7%B3%BB"><span class="toc-number">6.6.</span> <span class="toc-text">对已有的节点添加关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9-%E5%85%B3%E7%B3%BB"><span class="toc-number">6.7.</span> <span class="toc-text">删除节点|关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#REMOVE-%E5%91%BD%E4%BB%A4"><span class="toc-number">6.8.</span> <span class="toc-text">REMOVE 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SET-%E5%91%BD%E4%BB%A4"><span class="toc-number">6.9.</span> <span class="toc-text">SET 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ORDER-BY"><span class="toc-number">6.10.</span> <span class="toc-text">ORDER BY</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UNION-UNION-ALL"><span class="toc-number">6.11.</span> <span class="toc-text">UNION | UNION ALL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SKIP-LIMIT-%E5%AD%97%E5%8F%A5"><span class="toc-number">6.12.</span> <span class="toc-text">SKIP | LIMIT 字句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MERGE-%E5%91%BD%E4%BB%A4"><span class="toc-number">6.13.</span> <span class="toc-text">MERGE 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NULL-%E5%80%BC"><span class="toc-number">6.14.</span> <span class="toc-text">NULL 值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IN-%E5%91%BD%E4%BB%A4"><span class="toc-number">6.15.</span> <span class="toc-text">IN 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Neo4j-%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">6.16.</span> <span class="toc-text">Neo4j 中的函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E5%87%BD%E6%95%B0"><span class="toc-number">6.17.</span> <span class="toc-text">关系函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8E-SpringBoot-%E9%9B%86%E6%88%90"><span class="toc-number">6.18.</span> <span class="toc-text">与 SpringBoot 集成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%9A-%E6%89%80%E6%9C%89%E5%85%B3%E9%94%AE%E5%AD%97%E7%9B%AE%E5%BD%95"><span class="toc-number">7.</span> <span class="toc-text">📚 所有关键字目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%9F%A5%E8%AF%A2%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">8.</span> <span class="toc-text">1. 查询关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MATCH-%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F"><span class="toc-number">8.1.</span> <span class="toc-text">MATCH - 匹配模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OPTIONAL-MATCH-%E5%8F%AF%E9%80%89%E5%8C%B9%E9%85%8D"><span class="toc-number">8.2.</span> <span class="toc-text">OPTIONAL MATCH - 可选匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WHERE-%E6%9D%A1%E4%BB%B6%E8%BF%87%E6%BB%A4"><span class="toc-number">8.3.</span> <span class="toc-text">WHERE - 条件过滤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RETURN-%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C"><span class="toc-number">8.4.</span> <span class="toc-text">RETURN - 返回结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WITH-%E4%BC%A0%E9%80%92%E7%BB%93%E6%9E%9C"><span class="toc-number">8.5.</span> <span class="toc-text">WITH - 传递结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UNWIND-%E5%B1%95%E5%BC%80%E5%88%97%E8%A1%A8"><span class="toc-number">8.6.</span> <span class="toc-text">UNWIND - 展开列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ORDER-BY-%E6%8E%92%E5%BA%8F"><span class="toc-number">8.7.</span> <span class="toc-text">ORDER BY - 排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SKIP-%E8%B7%B3%E8%BF%87%E8%AE%B0%E5%BD%95"><span class="toc-number">8.8.</span> <span class="toc-text">SKIP - 跳过记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LIMIT-%E9%99%90%E5%88%B6%E8%AE%B0%E5%BD%95%E6%95%B0"><span class="toc-number">8.9.</span> <span class="toc-text">LIMIT - 限制记录数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DISTINCT-%E5%8E%BB%E9%87%8D"><span class="toc-number">8.10.</span> <span class="toc-text">DISTINCT - 去重</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">9.</span> <span class="toc-text">2. 数据操作关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CREATE-%E5%88%9B%E5%BB%BA"><span class="toc-number">9.1.</span> <span class="toc-text">CREATE - 创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MERGE-%E5%90%88%E5%B9%B6%EF%BC%88%E5%AD%98%E5%9C%A8%E5%88%99%E6%9B%B4%E6%96%B0%EF%BC%8C%E4%B8%8D%E5%AD%98%E5%9C%A8%E5%88%99%E5%88%9B%E5%BB%BA%EF%BC%89"><span class="toc-number">9.2.</span> <span class="toc-text">MERGE - 合并（存在则更新，不存在则创建）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SET-%E8%AE%BE%E7%BD%AE%E5%B1%9E%E6%80%A7"><span class="toc-number">9.3.</span> <span class="toc-text">SET - 设置属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#REMOVE-%E7%A7%BB%E9%99%A4%E5%B1%9E%E6%80%A7%E6%88%96%E6%A0%87%E7%AD%BE"><span class="toc-number">9.4.</span> <span class="toc-text">REMOVE - 移除属性或标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DELETE-%E5%88%A0%E9%99%A4"><span class="toc-number">9.5.</span> <span class="toc-text">DELETE - 删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DETACH-DELETE-%E5%88%86%E7%A6%BB%E5%88%A0%E9%99%A4%EF%BC%88%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9%E5%8F%8A%E5%85%B6%E5%85%B3%E7%B3%BB%EF%BC%89"><span class="toc-number">9.6.</span> <span class="toc-text">DETACH DELETE - 分离删除（删除节点及其关系）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">10.</span> <span class="toc-text">3. 模式匹配关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#NOT-%E5%90%A6%E5%AE%9A"><span class="toc-number">10.1.</span> <span class="toc-text">NOT - 否定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OR-%E6%88%96%E6%9D%A1%E4%BB%B6"><span class="toc-number">10.2.</span> <span class="toc-text">OR - 或条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AND-%E4%B8%8E%E6%9D%A1%E4%BB%B6"><span class="toc-number">10.3.</span> <span class="toc-text">AND - 与条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XOR-%E5%BC%82%E6%88%96%E6%9D%A1%E4%BB%B6"><span class="toc-number">10.4.</span> <span class="toc-text">XOR - 异或条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IN-%E5%8C%85%E5%90%AB"><span class="toc-number">10.5.</span> <span class="toc-text">IN - 包含</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STARTS-WITH-%E5%BC%80%E5%A4%B4%E5%8C%B9%E9%85%8D"><span class="toc-number">10.6.</span> <span class="toc-text">STARTS WITH - 开头匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ENDS-WITH-%E7%BB%93%E5%B0%BE%E5%8C%B9%E9%85%8D"><span class="toc-number">10.7.</span> <span class="toc-text">ENDS WITH - 结尾匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CONTAINS-%E5%8C%85%E5%90%AB%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">10.8.</span> <span class="toc-text">CONTAINS - 包含字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#REGEXP-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">10.9.</span> <span class="toc-text">REGEXP - 正则表达式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%81%9A%E5%90%88%E5%92%8C%E5%87%BD%E6%95%B0%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">11.</span> <span class="toc-text">4. 聚合和函数关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#COUNT-%E8%AE%A1%E6%95%B0"><span class="toc-number">11.1.</span> <span class="toc-text">COUNT - 计数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SUM-%E6%B1%82%E5%92%8C"><span class="toc-number">11.2.</span> <span class="toc-text">SUM - 求和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AVG-%E5%B9%B3%E5%9D%87%E5%80%BC"><span class="toc-number">11.3.</span> <span class="toc-text">AVG - 平均值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MIN-%E6%9C%80%E5%B0%8F%E5%80%BC"><span class="toc-number">11.4.</span> <span class="toc-text">MIN - 最小值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MAX-%E6%9C%80%E5%A4%A7%E5%80%BC"><span class="toc-number">11.5.</span> <span class="toc-text">MAX - 最大值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#COLLECT-%E6%94%B6%E9%9B%86%E4%B8%BA%E5%88%97%E8%A1%A8"><span class="toc-number">11.6.</span> <span class="toc-text">COLLECT - 收集为列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#size-%E5%A4%A7%E5%B0%8F"><span class="toc-number">11.7.</span> <span class="toc-text">size() - 大小</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#labels-%E6%A0%87%E7%AD%BE%E5%88%97%E8%A1%A8"><span class="toc-number">11.8.</span> <span class="toc-text">labels() - 标签列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#type-%E5%85%B3%E7%B3%BB%E7%B1%BB%E5%9E%8B"><span class="toc-number">11.9.</span> <span class="toc-text">type() - 关系类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#id-%E8%8A%82%E7%82%B9-%E5%85%B3%E7%B3%BB-ID"><span class="toc-number">11.10.</span> <span class="toc-text">id() - 节点&#x2F;关系 ID</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#properties-%E5%B1%9E%E6%80%A7-Map"><span class="toc-number">11.11.</span> <span class="toc-text">properties() - 属性 Map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nodes-%E8%B7%AF%E5%BE%84%E4%B8%AD%E7%9A%84%E8%8A%82%E7%82%B9"><span class="toc-number">11.12.</span> <span class="toc-text">nodes() - 路径中的节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#relationships-%E8%B7%AF%E5%BE%84%E4%B8%AD%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">11.13.</span> <span class="toc-text">relationships() - 路径中的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#range-%E8%8C%83%E5%9B%B4"><span class="toc-number">11.14.</span> <span class="toc-text">range() - 范围</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%92%8C%E8%BF%87%E7%A8%8B%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">12.</span> <span class="toc-text">5. 子查询和过程关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CALL-%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">12.1.</span> <span class="toc-text">CALL - 调用过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#YIELD-%E4%BA%A7%E7%94%9F%E7%BB%93%E6%9E%9C"><span class="toc-number">12.2.</span> <span class="toc-text">YIELD - 产生结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UNION-%E5%B9%B6%E9%9B%86"><span class="toc-number">12.3.</span> <span class="toc-text">UNION - 并集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UNION-ALL-%E5%B9%B6%E9%9B%86%EF%BC%88%E5%8C%85%E5%90%AB%E9%87%8D%E5%A4%8D%EF%BC%89"><span class="toc-number">12.4.</span> <span class="toc-text">UNION ALL - 并集（包含重复）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CASE-%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">12.5.</span> <span class="toc-text">CASE - 条件表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WHEN-CASE-%E5%AD%90%E5%8F%A5"><span class="toc-number">12.6.</span> <span class="toc-text">WHEN - CASE 子句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#THEN-CASE-%E7%BB%93%E6%9E%9C"><span class="toc-number">12.7.</span> <span class="toc-text">THEN - CASE 结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ELSE-CASE-%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">12.8.</span> <span class="toc-text">ELSE - CASE 默认值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#END-CASE-%E7%BB%93%E6%9D%9F"><span class="toc-number">12.9.</span> <span class="toc-text">END - CASE 结束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%BA%A6%E6%9D%9F%E5%92%8C%E7%B4%A2%E5%BC%95%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">13.</span> <span class="toc-text">6. 约束和索引关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CREATE-CONSTRAINT-%E5%88%9B%E5%BB%BA%E7%BA%A6%E6%9D%9F"><span class="toc-number">13.1.</span> <span class="toc-text">CREATE CONSTRAINT - 创建约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DROP-CONSTRAINT-%E5%88%A0%E9%99%A4%E7%BA%A6%E6%9D%9F"><span class="toc-number">13.2.</span> <span class="toc-text">DROP CONSTRAINT - 删除约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CREATE-INDEX-%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">13.3.</span> <span class="toc-text">CREATE INDEX - 创建索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DROP-INDEX-%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-number">13.4.</span> <span class="toc-text">DROP INDEX - 删除索引</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">14.</span> <span class="toc-text">7. 事务控制关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#BEGIN-%E5%BC%80%E5%A7%8B%E4%BA%8B%E5%8A%A1"><span class="toc-number">14.1.</span> <span class="toc-text">BEGIN - 开始事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#COMMIT-%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1"><span class="toc-number">14.2.</span> <span class="toc-text">COMMIT - 提交事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ROLLBACK-%E5%9B%9E%E6%BB%9A%E4%BA%8B%E5%8A%A1"><span class="toc-number">14.3.</span> <span class="toc-text">ROLLBACK - 回滚事务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E7%AE%A1%E7%90%86%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">15.</span> <span class="toc-text">8. 管理关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SHOW-%E6%98%BE%E7%A4%BA%E4%BF%A1%E6%81%AF"><span class="toc-number">15.1.</span> <span class="toc-text">SHOW - 显示信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EXPLAIN-%E8%A7%A3%E9%87%8A%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92"><span class="toc-number">15.2.</span> <span class="toc-text">EXPLAIN - 解释执行计划</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PROFILE-%E5%88%86%E6%9E%90%E6%9F%A5%E8%AF%A2%E6%80%A7%E8%83%BD"><span class="toc-number">15.3.</span> <span class="toc-text">PROFILE - 分析查询性能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LOAD-CSV-%E5%8A%A0%E8%BD%BD-CSV"><span class="toc-number">15.4.</span> <span class="toc-text">LOAD CSV - 加载 CSV</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%8A-%E6%89%80%E6%9C%89%E5%85%B3%E9%94%AE%E5%AD%97%E9%80%9F%E6%9F%A5%E8%A1%A8"><span class="toc-number">16.</span> <span class="toc-text">📊 所有关键字速查表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%AF-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%8F%90%E7%A4%BA"><span class="toc-number">17.</span> <span class="toc-text">🎯 最佳实践提示</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Neo4j 学习笔记
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Mark Shen</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2025-12-28T19:54:30.000Z" itemprop="datePublished">2025-12-28</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/blog/tags/Neo4j/" rel="tag">Neo4j</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="Neo4j-的简介"><a href="#Neo4j-的简介" class="headerlink" title="Neo4j 的简介"></a>Neo4j 的简介</h2><blockquote>
<p>Neo4j 存储的数据元素包括节点 、连接节点的边以及节点和边的属性。其开发者将其描述为符合 ACID 标准的事务型数据库，并具备原生图存储和处理功能。 Neo4j 提供非开源的 “社区版”，该版本采用 GNU 通用公共许可证的修改版授权；此外，它还提供在线备份和高可用性扩展，这些扩展采用闭源商业许可证授权。 Neo 也以闭源商业条款授权 Neo4j 及其这些扩展。</p>
<p>官网：<a target="_blank" rel="noopener" href="https://neo4j.com/">https://neo4j.com/</a></p>
<p>DB Rank: <a target="_blank" rel="noopener" href="https://db-engines.com/en/ranking">https://db-engines.com/en/ranking</a></p>
<p>deepseek: <a target="_blank" rel="noopener" href="https://chat.deepseek.com/share/hhhtx7rvss019bdq5q">https://chat.deepseek.com/share/hhhtx7rvss019bdq5q</a></p>
</blockquote>
<h2 id="底层原理"><a href="#底层原理" class="headerlink" title="底层原理"></a>底层原理</h2><ul>
<li>图论</li>
</ul>
<h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p>选择 <strong>Neo4j 图数据库</strong>，本质上是在选择一种<strong>以“关系”为一等公民的数据建模方式</strong>。当你的数据和问题 <strong>“关系复杂、关系重要、关系需要高频遍历”</strong> 时，就非常适合用 Neo4j。</p>
<p>下面我用 <strong>判断标准 + 典型场景 + 不适合的情况</strong> 给你一套清晰的决策指南。</p>
<hr>
<h3 id="一、什么时候「一定要」考虑-Neo4j？"><a href="#一、什么时候「一定要」考虑-Neo4j？" class="headerlink" title="一、什么时候「一定要」考虑 Neo4j？"></a>一、什么时候「一定要」考虑 Neo4j？</h3><p>你可以用下面这 6 个问题自检，只要 <strong>满足 2–3 条以上</strong>，Neo4j 基本就是正确选择。</p>
<h4 id="1️⃣-数据的「关系」比「数据本身」更重要"><a href="#1️⃣-数据的「关系」比「数据本身」更重要" class="headerlink" title="1️⃣ 数据的「关系」比「数据本身」更重要"></a>1️⃣ 数据的「关系」比「数据本身」更重要</h4><blockquote>
<p>你关心的是：<strong>谁和谁有什么关系？关系链怎么走？</strong></p>
</blockquote>
<p>例如：</p>
<ul>
<li>A → 认识 → B → 投资 → C → 控股 → D</li>
<li>用户 → 点击 → 商品 → 属于 → 品类 → 关联 → 其他商品</li>
</ul>
<p>✅ <strong>关系是核心价值</strong> → 用 Neo4j<br>❌ 只是字段附属 → 用关系型数据库</p>
<hr>
<h4 id="2️⃣-需要频繁做「多跳关系查询」（2-跳、3-跳、N-跳）"><a href="#2️⃣-需要频繁做「多跳关系查询」（2-跳、3-跳、N-跳）" class="headerlink" title="2️⃣ 需要频繁做「多跳关系查询」（2 跳、3 跳、N 跳）"></a>2️⃣ 需要频繁做「多跳关系查询」（2 跳、3 跳、N 跳）</h4><p>典型问题：</p>
<ul>
<li>“这个人朋友的朋友都有哪些？”</li>
<li>“与该商品 3 步之内有关联的所有商品”</li>
<li>“这个账号是否和黑名单存在 4 层以内的关联？”</li>
</ul>
<p>在 MySQL 中：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">JOIN</span> <span class="keyword">JOIN</span> <span class="keyword">JOIN</span> <span class="keyword">JOIN</span> ...（性能指数级下降）</span><br></pre></td></tr></table></figure>

<p>在 Neo4j 中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH (a)-[*1..4]-&gt;(b)</span><br></pre></td></tr></table></figure>

<p>🚀 <strong>查询复杂关系路径 = 图数据库主场</strong></p>
<hr>
<h4 id="3️⃣-关系数量巨大，且远大于实体数量"><a href="#3️⃣-关系数量巨大，且远大于实体数量" class="headerlink" title="3️⃣ 关系数量巨大，且远大于实体数量"></a>3️⃣ 关系数量巨大，且远大于实体数量</h4><p>例如：</p>
<ul>
<li>1 亿用户</li>
<li>但有 30 亿条「关注 / 交易 / 推荐 / 引用」关系</li>
</ul>
<p>📌 <strong>关系 ≫ 节点</strong><br>→ Neo4j 使用邻接表 + 指针直连，遍历复杂度几乎与数据量无关</p>
<hr>
<h4 id="4️⃣-关系类型多、经常变化"><a href="#4️⃣-关系类型多、经常变化" class="headerlink" title="4️⃣ 关系类型多、经常变化"></a>4️⃣ 关系类型多、经常变化</h4><p>比如：</p>
<ul>
<li>朋友</li>
<li>同事</li>
<li>投资</li>
<li>家人</li>
<li>推荐</li>
<li>转账</li>
<li>点赞</li>
<li>屏蔽</li>
</ul>
<p>关系是<strong>带类型、方向、属性的实体</strong>，而不是中间表。</p>
<p>Neo4j：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(User)-[:INVEST &#123;amount: 100w&#125;]-&gt;(Company)</span><br></pre></td></tr></table></figure>

<p>MySQL：</p>
<ul>
<li>改表结构</li>
<li>建新中间表</li>
<li>改 ORM</li>
<li>改 SQL</li>
</ul>
<p>📌 <strong>关系经常变 → Neo4j 成本最低</strong></p>
<hr>
<h4 id="5️⃣-需要做「关系推理-图算法」"><a href="#5️⃣-需要做「关系推理-图算法」" class="headerlink" title="5️⃣ 需要做「关系推理 / 图算法」"></a>5️⃣ 需要做「关系推理 / 图算法」</h4><p>例如：</p>
<ul>
<li>推荐系统（相似用户、相似商品）</li>
<li>社交影响力（PageRank）</li>
<li>路径最短 / 最相关</li>
<li>社区发现（聚类）</li>
</ul>
<p>Neo4j 自带：</p>
<ul>
<li>Graph Data Science（GDS）</li>
<li>PageRank</li>
<li>Louvain</li>
<li>BFS / DFS</li>
<li>最短路径</li>
</ul>
<p>👉 如果你在做 <strong>“结构洞 / 影响力 / 推荐”</strong>，Neo4j 非常合适</p>
<hr>
<h4 id="6️⃣-数据结构天然是「图」"><a href="#6️⃣-数据结构天然是「图」" class="headerlink" title="6️⃣ 数据结构天然是「图」"></a>6️⃣ 数据结构天然是「图」</h4><p>如果你在画白板时，很自然画出的是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A —— B —— C</span><br><span class="line"> \         |</span><br><span class="line">   —— D ——</span><br></pre></td></tr></table></figure>

<p>而不是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表1、表2、表3</span><br></pre></td></tr></table></figure>

<p>那你已经在用“图思维”了。</p>
<hr>
<h3 id="二、最典型的使用场景（高命中）"><a href="#二、最典型的使用场景（高命中）" class="headerlink" title="二、最典型的使用场景（高命中）"></a>二、最典型的使用场景（高命中）</h3><h4 id="🔹-1-社交网络"><a href="#🔹-1-社交网络" class="headerlink" title="🔹 1. 社交网络"></a>🔹 1. 社交网络</h4><ul>
<li>好友 / 关注 / 拉黑</li>
<li>二度、三度人脉</li>
<li>社交推荐</li>
</ul>
<p>📌 Facebook、LinkedIn 典型图模型</p>
<hr>
<h4 id="🔹-2-风控-反欺诈（非常适合）"><a href="#🔹-2-风控-反欺诈（非常适合）" class="headerlink" title="🔹 2. 风控 / 反欺诈（非常适合）"></a>🔹 2. 风控 / 反欺诈（非常适合）</h4><ul>
<li>账户关联</li>
<li>设备共享</li>
<li>资金路径</li>
<li>“是否存在关联黑产网络？”</li>
</ul>
<p>👉 <strong>银行 / 支付 / 电商风控核心</strong></p>
<hr>
<h4 id="🔹-3-推荐系统（关系型推荐）"><a href="#🔹-3-推荐系统（关系型推荐）" class="headerlink" title="🔹 3. 推荐系统（关系型推荐）"></a>🔹 3. 推荐系统（关系型推荐）</h4><ul>
<li>用户 ↔ 商品</li>
<li>商品 ↔ 商品</li>
<li>用户 ↔ 兴趣 ↔ 商品</li>
</ul>
<p>比纯协同过滤更可解释</p>
<hr>
<h4 id="🔹-4-知识图谱"><a href="#🔹-4-知识图谱" class="headerlink" title="🔹 4. 知识图谱"></a>🔹 4. 知识图谱</h4><ul>
<li>实体（人、公司、概念）</li>
<li>关系（属于、影响、包含、因果）</li>
</ul>
<p>📌 Neo4j = 知识图谱事实标准之一</p>
<hr>
<h4 id="🔹-5-IT-运维-拓扑-依赖分析"><a href="#🔹-5-IT-运维-拓扑-依赖分析" class="headerlink" title="🔹 5. IT 运维 / 拓扑 / 依赖分析"></a>🔹 5. IT 运维 / 拓扑 / 依赖分析</h4><ul>
<li>服务依赖</li>
<li>网络拓扑</li>
<li>微服务调用链</li>
</ul>
<hr>
<h4 id="🔹-6-代码分析-依赖图"><a href="#🔹-6-代码分析-依赖图" class="headerlink" title="🔹 6. 代码分析 / 依赖图"></a>🔹 6. 代码分析 / 依赖图</h4><ul>
<li>函数调用</li>
<li>模块依赖</li>
<li>类继承</li>
</ul>
<hr>
<h3 id="三、什么时候「不该」用-Neo4j？"><a href="#三、什么时候「不该」用-Neo4j？" class="headerlink" title="三、什么时候「不该」用 Neo4j？"></a>三、什么时候「不该」用 Neo4j？</h3><p>下面这些场景，用 Neo4j 反而是 <strong>反模式</strong>：</p>
<h4 id="❌-1-纯-CRUD-表结构稳定"><a href="#❌-1-纯-CRUD-表结构稳定" class="headerlink" title="❌ 1. 纯 CRUD + 表结构稳定"></a>❌ 1. 纯 CRUD + 表结构稳定</h4><ul>
<li>订单表</li>
<li>用户表</li>
<li>财务流水</li>
</ul>
<p>👉 MySQL / PostgreSQL 更合适</p>
<hr>
<h4 id="❌-2-大量聚合-报表-OLAP"><a href="#❌-2-大量聚合-报表-OLAP" class="headerlink" title="❌ 2. 大量聚合 / 报表 / OLAP"></a>❌ 2. 大量聚合 / 报表 / OLAP</h4><ul>
<li>SUM / COUNT / GROUP BY</li>
<li>财务统计</li>
<li>BI 报表</li>
</ul>
<p>👉 ClickHouse / PostgreSQL / Hive</p>
<hr>
<h4 id="❌-3-只是“有外键”，但不需要多跳"><a href="#❌-3-只是“有外键”，但不需要多跳" class="headerlink" title="❌ 3. 只是“有外键”，但不需要多跳"></a>❌ 3. 只是“有外键”，但不需要多跳</h4><ul>
<li>一对多</li>
<li>多对多（但最多 1 跳）</li>
</ul>
<p>👉 没必要上图数据库</p>
<hr>
<h4 id="❌-4-强事务-高并发写入"><a href="#❌-4-强事务-高并发写入" class="headerlink" title="❌ 4. 强事务 + 高并发写入"></a>❌ 4. 强事务 + 高并发写入</h4><p>Neo4j 写入吞吐量 <strong>不如</strong> 传统关系型数据库</p>
<hr>
<h3 id="四、一个简单的决策口诀"><a href="#四、一个简单的决策口诀" class="headerlink" title="四、一个简单的决策口诀"></a>四、一个简单的决策口诀</h3><blockquote>
<p><strong>数据是点，关系是网，查询在网里跑 —— 用 Neo4j</strong> &gt; <strong>数据是表，查询在字段上算 —— 用关系型数据库</strong></p>
</blockquote>
<hr>
<h3 id="五、给你一个工程实践建议（很重要）"><a href="#五、给你一个工程实践建议（很重要）" class="headerlink" title="五、给你一个工程实践建议（很重要）"></a>五、给你一个工程实践建议（很重要）</h3><p>📌 <strong>Neo4j 不应该“替代” MySQL，而是“补充”</strong></p>
<p>常见架构：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MySQL / PostgreSQL：事实数据、交易数据</span><br><span class="line">Neo4j：关系、推理、推荐、风控</span><br></pre></td></tr></table></figure>

<p>通过：</p>
<ul>
<li>Binlog / CDC</li>
<li>MQ</li>
<li>定期同步</li>
</ul>
<p>把「关系视图」同步到 Neo4j。</p>
<h2 id="对比关系型数据库"><a href="#对比关系型数据库" class="headerlink" title="对比关系型数据库"></a>对比关系型数据库</h2><table>
<thead>
<tr>
<th>关系型数据库（RDBMS）</th>
<th>图数据库</th>
</tr>
</thead>
<tbody><tr>
<td>表</td>
<td>图</td>
</tr>
<tr>
<td>行</td>
<td>节点</td>
</tr>
<tr>
<td>列和数据</td>
<td>属性和数据</td>
</tr>
<tr>
<td>约束</td>
<td>关系</td>
</tr>
</tbody></table>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul>
<li>基于 <code>Docker</code> 安装</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">    -d \</span><br><span class="line">    --name neo4j \</span><br><span class="line">    -p 7474:7474 \</span><br><span class="line">    -p 7687:7687 \</span><br><span class="line">    -e NEO4J_AUTH=neo4j/ABC123456 \</span><br><span class="line">    -v ./neo4j_data:/data \</span><br><span class="line">    neo4j:latest</span><br></pre></td></tr></table></figure>

<ul>
<li>部署完成后，访问 <code>http://localhost:7474/browser/</code></li>
</ul>
<h2 id="Cypher-查询语言"><a href="#Cypher-查询语言" class="headerlink" title="Cypher 查询语言"></a>Cypher 查询语言</h2><h3 id="创建节点-CREATE"><a href="#创建节点-CREATE" class="headerlink" title="创建节点 CREATE"></a>创建节点 CREATE</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create(emp:Employee)</span><br><span class="line">create(dept:Department)</span><br></pre></td></tr></table></figure>

<h3 id="检索语句-MATCH"><a href="#检索语句-MATCH" class="headerlink" title="检索语句 MATCH"></a>检索语句 MATCH</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">match(emp:Employee) return emp</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>match</code> 要与 <code>return</code> 连用</p>
</blockquote>
<h3 id="RETURN-返回"><a href="#RETURN-返回" class="headerlink" title="RETURN 返回"></a>RETURN 返回</h3><ul>
<li>检索节点的某些属性</li>
<li>检索节点的所有属性</li>
<li>检索节点和关联关系的某些属性</li>
<li>检索节点和关联关系的所有属性</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create (e:customer &#123;id:&quot;1001&quot;,name:&quot;shenjy&quot;,location:&quot;hangzhou&quot;&#125;)</span><br><span class="line">match (e:customer) return e.id,e.name,e.location</span><br><span class="line"></span><br><span class="line">create (cc:CreditCard &#123;id:&quot;1&quot;, number:&quot;348612836412863484&quot;,cvv:&quot;888&quot;, expireDate:&quot;26/17&quot;&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="创建关系-CREATE"><a href="#创建关系-CREATE" class="headerlink" title="创建关系 CREATE"></a>创建关系 CREATE</h3><ul>
<li><p>单向关系</p>
</li>
<li><p>双向关系</p>
</li>
<li><p>多标签</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create (m:User)</span><br><span class="line">create (m:电影:图片:Movie)</span><br><span class="line">MATCH (n:`电影`) RETURN n LIMIT 25</span><br><span class="line"></span><br><span class="line">create (p1:Profile1)-[r1:喜欢]-&gt;(p2:Profile2)</span><br><span class="line">MATCH p=()-[r:`喜欢`]-&gt;() RETURN p LIMIT 25</span><br></pre></td></tr></table></figure>

<h3 id="WHERE-条件"><a href="#WHERE-条件" class="headerlink" title="WHERE 条件"></a>WHERE 条件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n:Employee) RETURN n LIMIT 25</span><br><span class="line"></span><br><span class="line">create (e:Employee &#123;id:1,name:&quot;张三&quot;,age:18&#125;);</span><br><span class="line">create (e:Employee &#123;id:2,name:&quot;李四&quot;,age:19&#125;);</span><br><span class="line">create (e:Employee &#123;id:3,name:&quot;王五&quot;,age:20&#125;);</span><br><span class="line">create (e:Employee &#123;id:4,name:&quot;赵六&quot;,age:21&#125;);</span><br><span class="line">create (e:Employee &#123;id:5,name:&quot;田七&quot;,age:22&#125;)</span><br><span class="line"></span><br><span class="line">match (e:Employee) WHERE e.age &gt; 18 return e limit 10</span><br><span class="line">match (e:Employee) WHERE e.age &gt; 18 or e.id = 1 return e limit 10</span><br><span class="line">match (c:customer),(cc:CreditCard) where c.id=&quot;1001&quot; or cc.id=&quot;1&quot; return c, cc</span><br></pre></td></tr></table></figure>

<h3 id="对已有的节点添加关系"><a href="#对已有的节点添加关系" class="headerlink" title="对已有的节点添加关系"></a>对已有的节点添加关系</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">match (c:customer),(cc:CreditCard) where c.id=&quot;1001&quot; or cc.id=&quot;1&quot; return c, cc</span><br><span class="line"></span><br><span class="line">match (e:Employee), (cc:CreditCard) where e.name = &quot;张三&quot; and cc.id = &quot;1&quot; create (e)-[r:uses&#123;shopdate:&quot;2025/07/07&quot;, price: 6000&#125;]-&gt;(cc) return r</span><br></pre></td></tr></table></figure>

<h3 id="删除节点-关系"><a href="#删除节点-关系" class="headerlink" title="删除节点|关系"></a>删除节点|关系</h3><ul>
<li>删除节点</li>
<li>删除节点以及相关节点和关系</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">match (e:Employee) where e.name = &quot;王五&quot; delete e</span><br><span class="line"></span><br><span class="line">match (u:User) delete u</span><br><span class="line"></span><br><span class="line">match(cc:CreditCard)-[rel]-(e:Employee) return cc,rel,e</span><br><span class="line">match(cc:CreditCard)-[rel]-(e:Employee) delete cc,rel,e</span><br><span class="line"></span><br><span class="line"># 先删除关系</span><br><span class="line">MATCH (n)-[r]-()</span><br><span class="line">WHERE id(n) = 11</span><br><span class="line">DELETE r</span><br><span class="line"></span><br><span class="line"># 在删除节点</span><br><span class="line">MATCH (n)</span><br><span class="line">WHERE id(n) = 11 or id(n) = 12</span><br><span class="line">DELETE n</span><br></pre></td></tr></table></figure>

<h3 id="REMOVE-命令"><a href="#REMOVE-命令" class="headerlink" title="REMOVE 命令"></a>REMOVE 命令</h3><ul>
<li>向现有节点或关系添加或删除属性</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create(:Book&#123;id:1,title:&quot;Neo4j深入浅出&quot;,page:300,price:66&#125;)</span><br><span class="line"></span><br><span class="line">match(book:Book) remove book.page return book</span><br><span class="line"></span><br><span class="line">match(m:Movie) remove m:`电影`</span><br></pre></td></tr></table></figure>

<h3 id="SET-命令"><a href="#SET-命令" class="headerlink" title="SET 命令"></a>SET 命令</h3><ul>
<li>向现有的节点或关系添加属性值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 更新属性</span><br><span class="line">match (b:Book) set b.title = &quot;Neo4j实战笔记&quot; return b</span><br><span class="line"></span><br><span class="line">-- 添加属性</span><br><span class="line">match(b:Book) set b.pages = 300 return b</span><br></pre></td></tr></table></figure>

<h3 id="ORDER-BY"><a href="#ORDER-BY" class="headerlink" title="ORDER BY"></a>ORDER BY</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">match(e:Employee) order by e.age asc return e</span><br><span class="line"></span><br><span class="line">match(e:Employee) order by e.age desc return e</span><br></pre></td></tr></table></figure>

<h3 id="UNION-UNION-ALL"><a href="#UNION-UNION-ALL" class="headerlink" title="UNION | UNION ALL"></a>UNION | UNION ALL</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- UNION ALL</span><br><span class="line">match (e:Employee) where e.age &gt; 20 return e</span><br><span class="line">UNION ALL</span><br><span class="line">match (e:Employee) where e.age &gt;=18 and e.age &lt;=20 return e</span><br><span class="line"></span><br><span class="line">-- UNION</span><br><span class="line">match (e:Employee) where e.age &gt; 18 return e.age as age</span><br><span class="line">UNION</span><br><span class="line">match (e:Employee) where e.age &gt;=18 and e.age &lt;=20 return e.age as age</span><br></pre></td></tr></table></figure>

<h3 id="SKIP-LIMIT-字句"><a href="#SKIP-LIMIT-字句" class="headerlink" title="SKIP | LIMIT 字句"></a>SKIP | LIMIT 字句</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">match(e:Employee) order by e.age skip 0 limit 2 return e</span><br><span class="line"></span><br><span class="line">match(e:Employee) return e limit 10</span><br></pre></td></tr></table></figure>

<h3 id="MERGE-命令"><a href="#MERGE-命令" class="headerlink" title="MERGE 命令"></a>MERGE 命令</h3><ul>
<li>没有创建，有的话，不做任何操作</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">merge (u:User&#123;id:2,name:&quot;李四&quot;&#125;)</span><br><span class="line">-- Added 1 label, created 1 node, set 2 properties, completed after 11 ms.</span><br><span class="line">merge (u:User&#123;id:2,name:&quot;李四&quot;&#125;)</span><br><span class="line">-- (no changes, no records)</span><br></pre></td></tr></table></figure>

<h3 id="NULL-值"><a href="#NULL-值" class="headerlink" title="NULL 值"></a>NULL 值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">match(e:Employee) return e.id, e.name, e.age</span><br><span class="line">╒════╤══════╤═════╕</span><br><span class="line">│e.id│e.name│e.age│</span><br><span class="line">╞════╪══════╪═════╡</span><br><span class="line">│null│null  │null │</span><br><span class="line">├────┼──────┼─────┤</span><br><span class="line">│1   │&quot;张三&quot;  │18   │</span><br><span class="line">├────┼──────┼─────┤</span><br><span class="line">│4   │&quot;赵六&quot;  │21   │</span><br><span class="line">├────┼──────┼─────┤</span><br><span class="line">│5   │&quot;田七&quot;  │22   │</span><br><span class="line">├────┼──────┼─────┤</span><br><span class="line">│2   │&quot;李四&quot;  │19   │</span><br><span class="line">├────┼──────┼─────┤</span><br><span class="line">│3   │&quot;王五&quot;  │20   │</span><br><span class="line">└────┴──────┴─────┘</span><br><span class="line"></span><br><span class="line">match(e:Employee) where e.id is null return e.id, e.name, e.age</span><br><span class="line">╒════╤══════╤═════╕</span><br><span class="line">│e.id│e.name│e.age│</span><br><span class="line">╞════╪══════╪═════╡</span><br><span class="line">│null│null  │null │</span><br><span class="line">└────┴──────┴─────┘</span><br><span class="line"></span><br><span class="line">match(e:Employee) where e.id is not null return e.id, e.name, e.age</span><br><span class="line">╒════╤══════╤═════╕</span><br><span class="line">│e.id│e.name│e.age│</span><br><span class="line">╞════╪══════╪═════╡</span><br><span class="line">│1   │&quot;张三&quot;  │18   │</span><br><span class="line">├────┼──────┼─────┤</span><br><span class="line">│4   │&quot;赵六&quot;  │21   │</span><br><span class="line">├────┼──────┼─────┤</span><br><span class="line">│5   │&quot;田七&quot;  │22   │</span><br><span class="line">├────┼──────┼─────┤</span><br><span class="line">│2   │&quot;李四&quot;  │19   │</span><br><span class="line">├────┼──────┼─────┤</span><br><span class="line">│3   │&quot;王五&quot;  │20   │</span><br><span class="line">└────┴──────┴─────┘</span><br></pre></td></tr></table></figure>

<h3 id="IN-命令"><a href="#IN-命令" class="headerlink" title="IN 命令"></a>IN 命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">match(e:Employee) where e.age in [18,22] return e</span><br><span class="line">╒══════════════════════════════════════╕</span><br><span class="line">│e                                     │</span><br><span class="line">╞══════════════════════════════════════╡</span><br><span class="line">│(:Employee &#123;name: &quot;张三&quot;,id: 1,age: 18&#125;)│</span><br><span class="line">├──────────────────────────────────────┤</span><br><span class="line">│(:Employee &#123;name: &quot;田七&quot;,id: 5,age: 22&#125;)│</span><br><span class="line">└──────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h3 id="Neo4j-中的函数"><a href="#Neo4j-中的函数" class="headerlink" title="Neo4j 中的函数"></a>Neo4j 中的函数</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://neo4j.com/docs/cypher-manual/current/functions/">https://neo4j.com/docs/cypher-manual/current/functions/</a></p>
</blockquote>
<h3 id="关系函数"><a href="#关系函数" class="headerlink" title="关系函数"></a>关系函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">match(a:Profile1)-[r:`喜欢`]-&gt;(b:Profile2) return a,r,b</span><br><span class="line"></span><br><span class="line">match(a:Profile1)-[r:`喜欢`]-&gt;(b:Profile2) return startnode(r), endnode(r), id(r), type(r)</span><br><span class="line"></span><br><span class="line">╒════════════╤═══════════╤═════╤═══════╕</span><br><span class="line">│startnode(r)│endnode(r) │id(r)│type(r)│</span><br><span class="line">╞════════════╪═══════════╪═════╪═══════╡</span><br><span class="line">│(:Profile1) │(:Profile2)│0    │&quot;喜欢&quot;  │</span><br><span class="line">└────────────┴───────────┴─────┴───────┘</span><br></pre></td></tr></table></figure>

<h3 id="与-SpringBoot-集成"><a href="#与-SpringBoot-集成" class="headerlink" title="与 SpringBoot 集成"></a>与 SpringBoot 集成</h3><blockquote>
<p>参考文档：<a target="_blank" rel="noopener" href="https://spring.io/projects/spring-data-neo4j">https://spring.io/projects/spring-data-neo4j</a><br>springboot demo: <a target="_blank" rel="noopener" href="https://github.com/neo4j-examples/movies-java-bolt">https://github.com/neo4j-examples/movies-java-bolt</a></p>
</blockquote>
<h2 id="📚-所有关键字目录"><a href="#📚-所有关键字目录" class="headerlink" title="📚 所有关键字目录"></a>📚 所有关键字目录</h2><ol>
<li><a href="#1-%E6%9F%A5%E8%AF%A2%E5%85%B3%E9%94%AE%E5%AD%97">查询关键字</a></li>
<li><a href="#2-%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E5%85%B3%E9%94%AE%E5%AD%97">数据操作关键字</a></li>
<li><a href="#3-%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E5%85%B3%E9%94%AE%E5%AD%97">模式匹配关键字</a></li>
<li><a href="#4-%E8%81%9A%E5%90%88%E5%92%8C%E5%87%BD%E6%95%B0%E5%85%B3%E9%94%AE%E5%AD%97">聚合和函数关键字</a></li>
<li><a href="#5-%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%92%8C%E8%BF%87%E7%A8%8B%E5%85%B3%E9%94%AE%E5%AD%97">子查询和过程关键字</a></li>
<li><a href="#6-%E7%BA%A6%E6%9D%9F%E5%92%8C%E7%B4%A2%E5%BC%95%E5%85%B3%E9%94%AE%E5%AD%97">约束和索引关键字</a></li>
<li><a href="#7-%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E5%85%B3%E9%94%AE%E5%AD%97">事务控制关键字</a></li>
<li><a href="#8-%E7%AE%A1%E7%90%86%E5%85%B3%E9%94%AE%E5%AD%97">管理关键字</a></li>
</ol>
<hr>
<h2 id="1-查询关键字"><a href="#1-查询关键字" class="headerlink" title="1. 查询关键字"></a>1. <strong>查询关键字</strong></h2><h3 id="MATCH-匹配模式"><a href="#MATCH-匹配模式" class="headerlink" title="MATCH - 匹配模式"></a><strong>MATCH</strong> - 匹配模式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- 匹配所有 Person 节点</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p</span><br><span class="line"></span><br><span class="line">-- 匹配特定属性的节点</span><br><span class="line">MATCH (p:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">RETURN p</span><br><span class="line"></span><br><span class="line">-- 匹配关系和节点</span><br><span class="line">MATCH (p:Person)-[:FRIEND]-&gt;(f:Person)</span><br><span class="line">RETURN p.name, f.name</span><br><span class="line"></span><br><span class="line">-- 可变长度路径</span><br><span class="line">MATCH (a:Person)-[:FRIEND*1..3]-&gt;(b:Person)</span><br><span class="line">RETURN a.name, b.name</span><br></pre></td></tr></table></figure>

<h3 id="OPTIONAL-MATCH-可选匹配"><a href="#OPTIONAL-MATCH-可选匹配" class="headerlink" title="OPTIONAL MATCH - 可选匹配"></a><strong>OPTIONAL MATCH</strong> - 可选匹配</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 即使没有匹配也返回结果</span><br><span class="line">MATCH (p:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">OPTIONAL MATCH (p)-[:FRIEND]-&gt;(f)</span><br><span class="line">RETURN p.name, f.name</span><br><span class="line"></span><br><span class="line">-- 复杂的可选匹配</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">OPTIONAL MATCH (p)-[:WORKS_AT]-&gt;(c:Company)</span><br><span class="line">OPTIONAL MATCH (p)-[:LIVES_IN]-&gt;(city:City)</span><br><span class="line">RETURN p.name, c.name, city.name</span><br></pre></td></tr></table></figure>

<h3 id="WHERE-条件过滤"><a href="#WHERE-条件过滤" class="headerlink" title="WHERE - 条件过滤"></a><strong>WHERE</strong> - 条件过滤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">-- 基本条件</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.age &gt; 30</span><br><span class="line">RETURN p.name</span><br><span class="line"></span><br><span class="line">-- 多条件</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.age &gt; 30 AND p.city = &#x27;北京&#x27;</span><br><span class="line">RETURN p</span><br><span class="line"></span><br><span class="line">-- 正则表达式</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.name =~ &#x27;张.*&#x27;</span><br><span class="line">RETURN p</span><br><span class="line"></span><br><span class="line">-- 属性存在性检查</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE EXISTS(p.email)</span><br><span class="line">RETURN p</span><br><span class="line"></span><br><span class="line">-- IN 操作符</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.city IN [&#x27;北京&#x27;, &#x27;上海&#x27;, &#x27;广州&#x27;]</span><br><span class="line">RETURN p</span><br></pre></td></tr></table></figure>

<h3 id="RETURN-返回结果"><a href="#RETURN-返回结果" class="headerlink" title="RETURN - 返回结果"></a><strong>RETURN</strong> - 返回结果</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">-- 返回节点</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p</span><br><span class="line"></span><br><span class="line">-- 返回属性</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.name, p.age</span><br><span class="line"></span><br><span class="line">-- 返回表达式</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.name AS 姓名,</span><br><span class="line">       p.age AS 年龄,</span><br><span class="line">       CASE</span><br><span class="line">         WHEN p.age &lt; 30 THEN &#x27;青年&#x27;</span><br><span class="line">         WHEN p.age &lt; 50 THEN &#x27;中年&#x27;</span><br><span class="line">         ELSE &#x27;老年&#x27;</span><br><span class="line">       END AS 年龄段</span><br><span class="line"></span><br><span class="line">-- DISTINCT 去重</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN DISTINCT p.city</span><br><span class="line"></span><br><span class="line">-- 返回所有变量</span><br><span class="line">MATCH (p:Person)-[r]-&gt;(n)</span><br><span class="line">RETURN *</span><br></pre></td></tr></table></figure>

<h3 id="WITH-传递结果"><a href="#WITH-传递结果" class="headerlink" title="WITH - 传递结果"></a><strong>WITH</strong> - 传递结果</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- 传递结果并过滤</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WITH p</span><br><span class="line">WHERE p.age &gt; 30</span><br><span class="line">RETURN p.name</span><br><span class="line"></span><br><span class="line">-- 聚合后传递</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WITH p.city AS city, count(p) AS count</span><br><span class="line">WHERE count &gt; 100</span><br><span class="line">RETURN city, count</span><br><span class="line"></span><br><span class="line">-- 排序后分页</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WITH p</span><br><span class="line">ORDER BY p.age DESC</span><br><span class="line">SKIP 10</span><br><span class="line">LIMIT 5</span><br><span class="line">RETURN p.name, p.age</span><br></pre></td></tr></table></figure>

<h3 id="UNWIND-展开列表"><a href="#UNWIND-展开列表" class="headerlink" title="UNWIND - 展开列表"></a><strong>UNWIND</strong> - 展开列表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-- 展开列表</span><br><span class="line">WITH [&#x27;张三&#x27;, &#x27;李四&#x27;, &#x27;王五&#x27;] AS names</span><br><span class="line">UNWIND names AS name</span><br><span class="line">RETURN name</span><br><span class="line"></span><br><span class="line">-- 创建多个节点</span><br><span class="line">WITH [&#x27;北京&#x27;, &#x27;上海&#x27;, &#x27;广州&#x27;, &#x27;深圳&#x27;] AS cities</span><br><span class="line">UNWIND cities AS city</span><br><span class="line">CREATE (:City &#123;name: city&#125;)</span><br><span class="line">RETURN count(*)</span><br><span class="line"></span><br><span class="line">-- 展开嵌套结构</span><br><span class="line">WITH [</span><br><span class="line">  &#123;name: &#x27;张三&#x27;, age: 30&#125;,</span><br><span class="line">  &#123;name: &#x27;李四&#x27;, age: 25&#125;</span><br><span class="line">] AS people</span><br><span class="line">UNWIND people AS person</span><br><span class="line">CREATE (p:Person)</span><br><span class="line">SET p = person</span><br><span class="line">RETURN p</span><br></pre></td></tr></table></figure>

<h3 id="ORDER-BY-排序"><a href="#ORDER-BY-排序" class="headerlink" title="ORDER BY - 排序"></a><strong>ORDER BY</strong> - 排序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-- 升序排序</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.name, p.age</span><br><span class="line">ORDER BY p.age ASC</span><br><span class="line"></span><br><span class="line">-- 降序排序</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.name, p.salary</span><br><span class="line">ORDER BY p.salary DESC</span><br><span class="line"></span><br><span class="line">-- 多字段排序</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.city, p.name, p.age</span><br><span class="line">ORDER BY p.city, p.age DESC</span><br></pre></td></tr></table></figure>

<h3 id="SKIP-跳过记录"><a href="#SKIP-跳过记录" class="headerlink" title="SKIP - 跳过记录"></a><strong>SKIP</strong> - 跳过记录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 分页查询</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.name</span><br><span class="line">ORDER BY p.name</span><br><span class="line">SKIP 20</span><br><span class="line">LIMIT 10</span><br></pre></td></tr></table></figure>

<h3 id="LIMIT-限制记录数"><a href="#LIMIT-限制记录数" class="headerlink" title="LIMIT - 限制记录数"></a><strong>LIMIT</strong> - 限制记录数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 限制返回数量</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.name</span><br><span class="line">LIMIT 10</span><br><span class="line"></span><br><span class="line">-- 分页</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.name</span><br><span class="line">SKIP 30</span><br><span class="line">LIMIT 10</span><br></pre></td></tr></table></figure>

<h3 id="DISTINCT-去重"><a href="#DISTINCT-去重" class="headerlink" title="DISTINCT - 去重"></a><strong>DISTINCT</strong> - 去重</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 去除重复值</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN DISTINCT p.city</span><br><span class="line"></span><br><span class="line">-- 在聚合中使用</span><br><span class="line">MATCH (p:Person)-[:VISITED]-&gt;(c:City)</span><br><span class="line">RETURN p.name, count(DISTINCT c) AS cities_visited</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-数据操作关键字"><a href="#2-数据操作关键字" class="headerlink" title="2. 数据操作关键字"></a>2. <strong>数据操作关键字</strong></h2><h3 id="CREATE-创建"><a href="#CREATE-创建" class="headerlink" title="CREATE - 创建"></a><strong>CREATE</strong> - 创建</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- 创建节点</span><br><span class="line">CREATE (:Person &#123;name: &#x27;张三&#x27;, age: 30&#125;)</span><br><span class="line"></span><br><span class="line">-- 创建多个节点</span><br><span class="line">CREATE</span><br><span class="line">  (:Person &#123;name: &#x27;李四&#x27;&#125;),</span><br><span class="line">  (:Person &#123;name: &#x27;王五&#x27;&#125;)</span><br><span class="line"></span><br><span class="line">-- 创建节点和关系</span><br><span class="line">CREATE</span><br><span class="line">  (a:Person &#123;name: &#x27;张三&#x27;&#125;)-[:FRIEND]-&gt;(b:Person &#123;name: &#x27;李四&#x27;&#125;)</span><br><span class="line"></span><br><span class="line">-- 创建带属性的关系</span><br><span class="line">CREATE</span><br><span class="line">  (a:Person &#123;name: &#x27;张三&#x27;&#125;)-[r:FRIEND &#123;since: date()&#125;]-&gt;(b:Person &#123;name: &#x27;李四&#x27;&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="MERGE-合并（存在则更新，不存在则创建）"><a href="#MERGE-合并（存在则更新，不存在则创建）" class="headerlink" title="MERGE - 合并（存在则更新，不存在则创建）"></a><strong>MERGE</strong> - 合并（存在则更新，不存在则创建）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- 合并节点</span><br><span class="line">MERGE (p:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">RETURN p</span><br><span class="line"></span><br><span class="line">-- 合并并设置属性</span><br><span class="line">MERGE (p:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">ON CREATE SET</span><br><span class="line">  p.created = datetime(),</span><br><span class="line">  p.status = &#x27;new&#x27;</span><br><span class="line">ON MATCH SET</span><br><span class="line">  p.updated = datetime(),</span><br><span class="line">  p.update_count = coalesce(p.update_count, 0) + 1</span><br><span class="line"></span><br><span class="line">-- 合并关系</span><br><span class="line">MERGE (a:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">MERGE (b:Person &#123;name: &#x27;李四&#x27;&#125;)</span><br><span class="line">MERGE (a)-[:FRIEND]-&gt;(b)</span><br></pre></td></tr></table></figure>

<h3 id="SET-设置属性"><a href="#SET-设置属性" class="headerlink" title="SET - 设置属性"></a><strong>SET</strong> - 设置属性</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- 设置属性</span><br><span class="line">MATCH (p:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">SET p.age = 31</span><br><span class="line"></span><br><span class="line">-- 设置多个属性</span><br><span class="line">MATCH (p:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">SET p.age = 31, p.city = &#x27;北京&#x27;</span><br><span class="line"></span><br><span class="line">-- 设置 Map 属性</span><br><span class="line">MATCH (p:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">SET p += &#123;age: 31, city: &#x27;北京&#x27;&#125;</span><br><span class="line"></span><br><span class="line">-- 设置标签</span><br><span class="line">MATCH (p &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">SET p:Employee:Manager</span><br><span class="line"></span><br><span class="line">-- 设置数组属性</span><br><span class="line">MATCH (p:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">SET p.skills = [&#x27;Java&#x27;, &#x27;Python&#x27;]</span><br></pre></td></tr></table></figure>

<h3 id="REMOVE-移除属性或标签"><a href="#REMOVE-移除属性或标签" class="headerlink" title="REMOVE - 移除属性或标签"></a><strong>REMOVE</strong> - 移除属性或标签</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- 移除属性</span><br><span class="line">MATCH (p:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">REMOVE p.temp_field</span><br><span class="line"></span><br><span class="line">-- 移除标签</span><br><span class="line">MATCH (p:Person:Employee &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">REMOVE p:Employee</span><br><span class="line"></span><br><span class="line">-- 移除多个标签</span><br><span class="line">MATCH (p:Person:Employee:Manager)</span><br><span class="line">REMOVE p:Employee:Manager</span><br></pre></td></tr></table></figure>

<h3 id="DELETE-删除"><a href="#DELETE-删除" class="headerlink" title="DELETE - 删除"></a><strong>DELETE</strong> - 删除</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- 删除节点（必须先删除关系）</span><br><span class="line">MATCH (p:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">DELETE p</span><br><span class="line"></span><br><span class="line">-- 删除关系</span><br><span class="line">MATCH (p:Person &#123;name: &#x27;张三&#x27;&#125;)-[r:FRIEND]-&gt;()</span><br><span class="line">DELETE r</span><br><span class="line"></span><br><span class="line">-- 删除多个</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.age &gt; 100</span><br><span class="line">DELETE p</span><br></pre></td></tr></table></figure>

<h3 id="DETACH-DELETE-分离删除（删除节点及其关系）"><a href="#DETACH-DELETE-分离删除（删除节点及其关系）" class="headerlink" title="DETACH DELETE - 分离删除（删除节点及其关系）"></a><strong>DETACH DELETE</strong> - 分离删除（删除节点及其关系）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 删除节点及其所有关系</span><br><span class="line">MATCH (p:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">DETACH DELETE p</span><br><span class="line"></span><br><span class="line">-- 批量删除</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.status = &#x27;deleted&#x27;</span><br><span class="line">DETACH DELETE p</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-模式匹配关键字"><a href="#3-模式匹配关键字" class="headerlink" title="3. 模式匹配关键字"></a>3. <strong>模式匹配关键字</strong></h2><h3 id="NOT-否定"><a href="#NOT-否定" class="headerlink" title="NOT - 否定"></a><strong>NOT</strong> - 否定</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-- 不匹配特定模式</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE NOT (p)-[:FRIEND]-&gt;()</span><br><span class="line">RETURN p.name</span><br><span class="line"></span><br><span class="line">-- 复杂的否定条件</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE NOT (p.age &lt; 30 AND p.city = &#x27;北京&#x27;)</span><br><span class="line">RETURN p</span><br><span class="line"></span><br><span class="line">-- 否定 EXISTS</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE NOT EXISTS(p.email)</span><br><span class="line">RETURN p.name</span><br></pre></td></tr></table></figure>

<h3 id="OR-或条件"><a href="#OR-或条件" class="headerlink" title="OR - 或条件"></a><strong>OR</strong> - 或条件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 或条件</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.age &lt; 30 OR p.city = &#x27;北京&#x27;</span><br><span class="line">RETURN p</span><br><span class="line"></span><br><span class="line">-- 多个 OR 条件</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.city = &#x27;北京&#x27; OR p.city = &#x27;上海&#x27; OR p.city = &#x27;广州&#x27;</span><br><span class="line">RETURN p</span><br></pre></td></tr></table></figure>

<h3 id="AND-与条件"><a href="#AND-与条件" class="headerlink" title="AND - 与条件"></a><strong>AND</strong> - 与条件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 与条件</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.age &gt; 30 AND p.city = &#x27;北京&#x27;</span><br><span class="line">RETURN p</span><br></pre></td></tr></table></figure>

<h3 id="XOR-异或条件"><a href="#XOR-异或条件" class="headerlink" title="XOR - 异或条件"></a><strong>XOR</strong> - 异或条件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 异或条件</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.age &lt; 30 XOR p.city = &#x27;北京&#x27;</span><br><span class="line">RETURN p</span><br></pre></td></tr></table></figure>

<h3 id="IN-包含"><a href="#IN-包含" class="headerlink" title="IN - 包含"></a><strong>IN</strong> - 包含</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 属性在列表中</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.city IN [&#x27;北京&#x27;, &#x27;上海&#x27;, &#x27;广州&#x27;]</span><br><span class="line">RETURN p</span><br><span class="line"></span><br><span class="line">-- 子查询结果</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.name IN [&#x27;张三&#x27;, &#x27;李四&#x27;]</span><br><span class="line">RETURN p</span><br></pre></td></tr></table></figure>

<h3 id="STARTS-WITH-开头匹配"><a href="#STARTS-WITH-开头匹配" class="headerlink" title="STARTS WITH - 开头匹配"></a><strong>STARTS WITH</strong> - 开头匹配</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 字符串开头匹配</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.name STARTS WITH &#x27;张&#x27;</span><br><span class="line">RETURN p.name</span><br></pre></td></tr></table></figure>

<h3 id="ENDS-WITH-结尾匹配"><a href="#ENDS-WITH-结尾匹配" class="headerlink" title="ENDS WITH - 结尾匹配"></a><strong>ENDS WITH</strong> - 结尾匹配</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 字符串结尾匹配</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.email ENDS WITH &#x27;@example.com&#x27;</span><br><span class="line">RETURN p.name</span><br></pre></td></tr></table></figure>

<h3 id="CONTAINS-包含字符串"><a href="#CONTAINS-包含字符串" class="headerlink" title="CONTAINS - 包含字符串"></a><strong>CONTAINS</strong> - 包含字符串</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 包含子字符串</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.name CONTAINS &#x27;三&#x27;</span><br><span class="line">RETURN p.name</span><br></pre></td></tr></table></figure>

<h3 id="REGEXP-正则表达式"><a href="#REGEXP-正则表达式" class="headerlink" title="REGEXP - 正则表达式"></a><strong>REGEXP</strong> - 正则表达式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 正则表达式匹配</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.name =~ &#x27;张.*&#x27;</span><br><span class="line">RETURN p.name</span><br><span class="line"></span><br><span class="line">-- 复杂的正则</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WHERE p.email =~ &#x27;[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]&#123;2,&#125;&#x27;</span><br><span class="line">RETURN p.name</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-聚合和函数关键字"><a href="#4-聚合和函数关键字" class="headerlink" title="4. 聚合和函数关键字"></a>4. <strong>聚合和函数关键字</strong></h2><h3 id="COUNT-计数"><a href="#COUNT-计数" class="headerlink" title="COUNT - 计数"></a><strong>COUNT</strong> - 计数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- 计数所有</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN count(p)</span><br><span class="line"></span><br><span class="line">-- 计数特定值</span><br><span class="line">MATCH (p:Person)-[:FRIEND]-&gt;(f)</span><br><span class="line">RETURN p.name, count(f) AS friend_count</span><br><span class="line"></span><br><span class="line">-- DISTINCT 计数</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN count(DISTINCT p.city)</span><br></pre></td></tr></table></figure>

<h3 id="SUM-求和"><a href="#SUM-求和" class="headerlink" title="SUM - 求和"></a><strong>SUM</strong> - 求和</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 求和</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN sum(p.salary)</span><br><span class="line"></span><br><span class="line">-- 分组求和</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.city, sum(p.salary) AS total_salary</span><br></pre></td></tr></table></figure>

<h3 id="AVG-平均值"><a href="#AVG-平均值" class="headerlink" title="AVG - 平均值"></a><strong>AVG</strong> - 平均值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 平均值</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN avg(p.age)</span><br><span class="line"></span><br><span class="line">-- 分组平均值</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.city, avg(p.age) AS avg_age</span><br></pre></td></tr></table></figure>

<h3 id="MIN-最小值"><a href="#MIN-最小值" class="headerlink" title="MIN - 最小值"></a><strong>MIN</strong> - 最小值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 最小值</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN min(p.age)</span><br><span class="line"></span><br><span class="line">-- 分组最小值</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.city, min(p.age) AS min_age</span><br></pre></td></tr></table></figure>

<h3 id="MAX-最大值"><a href="#MAX-最大值" class="headerlink" title="MAX - 最大值"></a><strong>MAX</strong> - 最大值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 最大值</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN max(p.age)</span><br><span class="line"></span><br><span class="line">-- 分组最大值</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.city, max(p.age) AS max_age</span><br></pre></td></tr></table></figure>

<h3 id="COLLECT-收集为列表"><a href="#COLLECT-收集为列表" class="headerlink" title="COLLECT - 收集为列表"></a><strong>COLLECT</strong> - 收集为列表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 收集为列表</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.city, collect(p.name) AS people</span><br><span class="line"></span><br><span class="line">-- 收集 DISTINCT</span><br><span class="line">MATCH (p:Person)-[:FRIEND]-&gt;(f)</span><br><span class="line">RETURN p.name, collect(DISTINCT f.name) AS friends</span><br></pre></td></tr></table></figure>

<h3 id="size-大小"><a href="#size-大小" class="headerlink" title="size() - 大小"></a><strong>size()</strong> - 大小</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- 列表大小</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.name, size(p.skills) AS skill_count</span><br><span class="line"></span><br><span class="line">-- 路径大小</span><br><span class="line">MATCH path = (a:Person)-[:FRIEND*]-&gt;(b:Person)</span><br><span class="line">RETURN size(nodes(path)) AS path_length</span><br><span class="line"></span><br><span class="line">-- 字符串大小</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.name, size(p.name) AS name_length</span><br></pre></td></tr></table></figure>

<h3 id="labels-标签列表"><a href="#labels-标签列表" class="headerlink" title="labels() - 标签列表"></a><strong>labels()</strong> - 标签列表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 获取节点标签</span><br><span class="line">MATCH (p &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">RETURN labels(p)</span><br><span class="line"></span><br><span class="line">-- 在 WHERE 中使用</span><br><span class="line">MATCH (n)</span><br><span class="line">WHERE &#x27;Employee&#x27; IN labels(n)</span><br><span class="line">RETURN n.name</span><br></pre></td></tr></table></figure>

<h3 id="type-关系类型"><a href="#type-关系类型" class="headerlink" title="type() - 关系类型"></a><strong>type()</strong> - 关系类型</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 获取关系类型</span><br><span class="line">MATCH (p:Person)-[r]-&gt;()</span><br><span class="line">RETURN type(r), count(*) AS count</span><br><span class="line"></span><br><span class="line">-- 筛选关系类型</span><br><span class="line">MATCH (p:Person)-[r]-&gt;()</span><br><span class="line">WHERE type(r) = &#x27;FRIEND&#x27;</span><br><span class="line">RETURN p.name</span><br></pre></td></tr></table></figure>

<h3 id="id-节点-关系-ID"><a href="#id-节点-关系-ID" class="headerlink" title="id() - 节点/关系 ID"></a><strong>id()</strong> - 节点/关系 ID</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 获取节点 ID</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN id(p), p.name</span><br><span class="line"></span><br><span class="line">-- 获取关系 ID</span><br><span class="line">MATCH (p:Person)-[r:FRIEND]-&gt;()</span><br><span class="line">RETURN id(r), type(r)</span><br></pre></td></tr></table></figure>

<h3 id="properties-属性-Map"><a href="#properties-属性-Map" class="headerlink" title="properties() - 属性 Map"></a><strong>properties()</strong> - 属性 Map</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 获取属性 Map</span><br><span class="line">MATCH (p:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">RETURN properties(p)</span><br></pre></td></tr></table></figure>

<h3 id="nodes-路径中的节点"><a href="#nodes-路径中的节点" class="headerlink" title="nodes() - 路径中的节点"></a><strong>nodes()</strong> - 路径中的节点</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 获取路径中的节点</span><br><span class="line">MATCH path = (a:Person)-[:FRIEND*2]-&gt;(c:Person)</span><br><span class="line">RETURN [node IN nodes(path) | node.name] AS path_nodes</span><br></pre></td></tr></table></figure>

<h3 id="relationships-路径中的关系"><a href="#relationships-路径中的关系" class="headerlink" title="relationships() - 路径中的关系"></a><strong>relationships()</strong> - 路径中的关系</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 获取路径中的关系</span><br><span class="line">MATCH path = (a:Person)-[:FRIEND*2]-&gt;(c:Person)</span><br><span class="line">RETURN [r IN relationships(path) | type(r)] AS relationship_types</span><br></pre></td></tr></table></figure>

<h3 id="range-范围"><a href="#range-范围" class="headerlink" title="range() - 范围"></a><strong>range()</strong> - 范围</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 生成数字范围</span><br><span class="line">RETURN range(1, 10) AS numbers</span><br><span class="line"></span><br><span class="line">-- 生成带步长的范围</span><br><span class="line">RETURN range(0, 100, 10) AS decades</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-子查询和过程关键字"><a href="#5-子查询和过程关键字" class="headerlink" title="5. 子查询和过程关键字"></a>5. <strong>子查询和过程关键字</strong></h2><h3 id="CALL-调用过程"><a href="#CALL-调用过程" class="headerlink" title="CALL - 调用过程"></a><strong>CALL</strong> - 调用过程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- 调用内置过程</span><br><span class="line">CALL db.labels() YIELD label</span><br><span class="line">RETURN label</span><br><span class="line"></span><br><span class="line">-- 调用 APOC 过程</span><br><span class="line">CALL apoc.help(&#x27;apoc&#x27;)</span><br><span class="line">YIELD name, description</span><br><span class="line">RETURN name, description</span><br><span class="line"></span><br><span class="line">-- 调用自定义过程</span><br><span class="line">CALL custom.procedure(&#x27;参数&#x27;)</span><br><span class="line">YIELD result</span><br><span class="line">RETURN result</span><br></pre></td></tr></table></figure>

<h3 id="YIELD-产生结果"><a href="#YIELD-产生结果" class="headerlink" title="YIELD - 产生结果"></a><strong>YIELD</strong> - 产生结果</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 从过程产生结果</span><br><span class="line">CALL db.labels()</span><br><span class="line">YIELD label</span><br><span class="line">RETURN count(label) AS label_count</span><br><span class="line"></span><br><span class="line">-- 多个字段</span><br><span class="line">CALL apoc.meta.stats()</span><br><span class="line">YIELD labelCount, relTypeCount, propertyKeyCount</span><br><span class="line">RETURN labelCount, relTypeCount, propertyKeyCount</span><br></pre></td></tr></table></figure>

<h3 id="UNION-并集"><a href="#UNION-并集" class="headerlink" title="UNION - 并集"></a><strong>UNION</strong> - 并集</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- 合并查询结果</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.name AS name</span><br><span class="line">UNION</span><br><span class="line">MATCH (c:Company)</span><br><span class="line">RETURN c.name AS name</span><br><span class="line"></span><br><span class="line">-- UNION ALL（包含重复）</span><br><span class="line">MATCH (p:Person &#123;city: &#x27;北京&#x27;&#125;)</span><br><span class="line">RETURN p.name</span><br><span class="line">UNION ALL</span><br><span class="line">MATCH (p:Person &#123;city: &#x27;上海&#x27;&#125;)</span><br><span class="line">RETURN p.name</span><br></pre></td></tr></table></figure>

<h3 id="UNION-ALL-并集（包含重复）"><a href="#UNION-ALL-并集（包含重复）" class="headerlink" title="UNION ALL - 并集（包含重复）"></a><strong>UNION ALL</strong> - 并集（包含重复）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 包含重复的并集</span><br><span class="line">MATCH (p:Employee)</span><br><span class="line">RETURN p.name</span><br><span class="line">UNION ALL</span><br><span class="line">MATCH (m:Manager)</span><br><span class="line">RETURN m.name</span><br></pre></td></tr></table></figure>

<h3 id="CASE-条件表达式"><a href="#CASE-条件表达式" class="headerlink" title="CASE - 条件表达式"></a><strong>CASE</strong> - 条件表达式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- 简单 CASE</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.name,</span><br><span class="line">  CASE p.age</span><br><span class="line">    WHEN 20 THEN &#x27;青年&#x27;</span><br><span class="line">    WHEN 30 THEN &#x27;壮年&#x27;</span><br><span class="line">    ELSE &#x27;其他&#x27;</span><br><span class="line">  END AS age_group</span><br><span class="line"></span><br><span class="line">-- 搜索 CASE</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN p.name,</span><br><span class="line">  CASE</span><br><span class="line">    WHEN p.age &lt; 30 THEN &#x27;青年&#x27;</span><br><span class="line">    WHEN p.age &lt; 50 THEN &#x27;中年&#x27;</span><br><span class="line">    ELSE &#x27;老年&#x27;</span><br><span class="line">  END AS age_group</span><br></pre></td></tr></table></figure>

<h3 id="WHEN-CASE-子句"><a href="#WHEN-CASE-子句" class="headerlink" title="WHEN - CASE 子句"></a><strong>WHEN</strong> - CASE 子句</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 在 CASE 中使用</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN</span><br><span class="line">  CASE</span><br><span class="line">    WHEN p.salary &gt; 50000 THEN &#x27;高收入&#x27;</span><br><span class="line">    WHEN p.salary &gt; 30000 THEN &#x27;中等收入&#x27;</span><br><span class="line">    ELSE &#x27;低收入&#x27;</span><br><span class="line">  END AS income_level</span><br></pre></td></tr></table></figure>

<h3 id="THEN-CASE-结果"><a href="#THEN-CASE-结果" class="headerlink" title="THEN - CASE 结果"></a><strong>THEN</strong> - CASE 结果</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- CASE 的结果分支</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN</span><br><span class="line">  CASE</span><br><span class="line">    WHEN p.city = &#x27;北京&#x27; THEN &#x27;北方&#x27;</span><br><span class="line">    WHEN p.city = &#x27;上海&#x27; THEN &#x27;东方&#x27;</span><br><span class="line">    WHEN p.city = &#x27;广州&#x27; THEN &#x27;南方&#x27;</span><br><span class="line">    ELSE &#x27;其他&#x27;</span><br><span class="line">  END AS region</span><br></pre></td></tr></table></figure>

<h3 id="ELSE-CASE-默认值"><a href="#ELSE-CASE-默认值" class="headerlink" title="ELSE - CASE 默认值"></a><strong>ELSE</strong> - CASE 默认值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- CASE 的默认分支</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN</span><br><span class="line">  CASE p.department</span><br><span class="line">    WHEN &#x27;IT&#x27; THEN &#x27;技术部&#x27;</span><br><span class="line">    WHEN &#x27;HR&#x27; THEN &#x27;人力资源部&#x27;</span><br><span class="line">    ELSE &#x27;其他部门&#x27;</span><br><span class="line">  END AS dept_name</span><br></pre></td></tr></table></figure>

<h3 id="END-CASE-结束"><a href="#END-CASE-结束" class="headerlink" title="END - CASE 结束"></a><strong>END</strong> - CASE 结束</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- CASE 表达式结束</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">RETURN</span><br><span class="line">  p.name,</span><br><span class="line">  CASE</span><br><span class="line">    WHEN p.age &lt; 18 THEN &#x27;未成年&#x27;</span><br><span class="line">    WHEN p.age &lt; 60 THEN &#x27;成年人&#x27;</span><br><span class="line">    ELSE &#x27;老年人&#x27;</span><br><span class="line">  END AS age_category</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="6-约束和索引关键字"><a href="#6-约束和索引关键字" class="headerlink" title="6. 约束和索引关键字"></a>6. <strong>约束和索引关键字</strong></h2><h3 id="CREATE-CONSTRAINT-创建约束"><a href="#CREATE-CONSTRAINT-创建约束" class="headerlink" title="CREATE CONSTRAINT - 创建约束"></a><strong>CREATE CONSTRAINT</strong> - 创建约束</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 唯一约束</span><br><span class="line">CREATE CONSTRAINT unique_person_name FOR (p:Person) REQUIRE p.name IS UNIQUE</span><br><span class="line"></span><br><span class="line">-- 节点键约束（企业版）</span><br><span class="line">CREATE CONSTRAINT node_key_person_id FOR (p:Person) REQUIRE (p.id) IS NODE KEY</span><br><span class="line"></span><br><span class="line">-- 存在性约束（企业版）</span><br><span class="line">CREATE CONSTRAINT person_name_exists FOR (p:Person) REQUIRE p.name IS NOT NULL</span><br></pre></td></tr></table></figure>

<h3 id="DROP-CONSTRAINT-删除约束"><a href="#DROP-CONSTRAINT-删除约束" class="headerlink" title="DROP CONSTRAINT - 删除约束"></a><strong>DROP CONSTRAINT</strong> - 删除约束</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 删除约束</span><br><span class="line">DROP CONSTRAINT unique_person_name</span><br></pre></td></tr></table></figure>

<h3 id="CREATE-INDEX-创建索引"><a href="#CREATE-INDEX-创建索引" class="headerlink" title="CREATE INDEX - 创建索引"></a><strong>CREATE INDEX</strong> - 创建索引</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 创建单属性索引</span><br><span class="line">CREATE INDEX person_name_index FOR (p:Person) ON (p.name)</span><br><span class="line"></span><br><span class="line">-- 创建复合索引</span><br><span class="line">CREATE INDEX person_city_age_index FOR (p:Person) ON (p.city, p.age)</span><br><span class="line"></span><br><span class="line">-- 全文索引</span><br><span class="line">CREATE FULLTEXT INDEX person_fulltext FOR (p:Person) ON EACH [p.name, p.description]</span><br></pre></td></tr></table></figure>

<h3 id="DROP-INDEX-删除索引"><a href="#DROP-INDEX-删除索引" class="headerlink" title="DROP INDEX - 删除索引"></a><strong>DROP INDEX</strong> - 删除索引</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 删除索引</span><br><span class="line">DROP INDEX person_name_index</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="7-事务控制关键字"><a href="#7-事务控制关键字" class="headerlink" title="7. 事务控制关键字"></a>7. <strong>事务控制关键字</strong></h2><h3 id="BEGIN-开始事务"><a href="#BEGIN-开始事务" class="headerlink" title="BEGIN - 开始事务"></a><strong>BEGIN</strong> - 开始事务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- 开始事务</span><br><span class="line">:begin</span><br><span class="line"></span><br><span class="line">-- 在事务中执行操作</span><br><span class="line">CREATE (:Person &#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">CREATE (:Person &#123;name: &#x27;李四&#x27;&#125;)</span><br><span class="line"></span><br><span class="line">-- 提交或回滚</span><br><span class="line">:commit</span><br><span class="line">-- 或</span><br><span class="line">:rollback</span><br></pre></td></tr></table></figure>

<h3 id="COMMIT-提交事务"><a href="#COMMIT-提交事务" class="headerlink" title="COMMIT - 提交事务"></a><strong>COMMIT</strong> - 提交事务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 提交事务</span><br><span class="line">:commit</span><br></pre></td></tr></table></figure>

<h3 id="ROLLBACK-回滚事务"><a href="#ROLLBACK-回滚事务" class="headerlink" title="ROLLBACK - 回滚事务"></a><strong>ROLLBACK</strong> - 回滚事务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 回滚事务</span><br><span class="line">:rollback</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="8-管理关键字"><a href="#8-管理关键字" class="headerlink" title="8. 管理关键字"></a>8. <strong>管理关键字</strong></h2><h3 id="SHOW-显示信息"><a href="#SHOW-显示信息" class="headerlink" title="SHOW - 显示信息"></a><strong>SHOW</strong> - 显示信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- 显示所有约束</span><br><span class="line">SHOW CONSTRAINTS</span><br><span class="line"></span><br><span class="line">-- 显示所有索引</span><br><span class="line">SHOW INDEXES</span><br><span class="line"></span><br><span class="line">-- 显示所有过程</span><br><span class="line">SHOW PROCEDURES</span><br><span class="line"></span><br><span class="line">-- 显示所有函数</span><br><span class="line">SHOW FUNCTIONS</span><br></pre></td></tr></table></figure>

<h3 id="EXPLAIN-解释执行计划"><a href="#EXPLAIN-解释执行计划" class="headerlink" title="EXPLAIN - 解释执行计划"></a><strong>EXPLAIN</strong> - 解释执行计划</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 查看查询计划</span><br><span class="line">EXPLAIN MATCH (p:Person)-[:FRIEND]-&gt;(f)</span><br><span class="line">RETURN p.name, count(f)</span><br></pre></td></tr></table></figure>

<h3 id="PROFILE-分析查询性能"><a href="#PROFILE-分析查询性能" class="headerlink" title="PROFILE - 分析查询性能"></a><strong>PROFILE</strong> - 分析查询性能</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 分析查询性能</span><br><span class="line">PROFILE MATCH (p:Person)-[:FRIEND]-&gt;(f)</span><br><span class="line">RETURN p.name, count(f)</span><br></pre></td></tr></table></figure>

<h3 id="LOAD-CSV-加载-CSV"><a href="#LOAD-CSV-加载-CSV" class="headerlink" title="LOAD CSV - 加载 CSV"></a><strong>LOAD CSV</strong> - 加载 CSV</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- 加载 CSV 文件</span><br><span class="line">LOAD CSV WITH HEADERS FROM &#x27;file:///persons.csv&#x27; AS row</span><br><span class="line">CREATE (:Person &#123;</span><br><span class="line">  name: row.name,</span><br><span class="line">  age: toInteger(row.age),</span><br><span class="line">  city: row.city</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">-- 带转换的加载</span><br><span class="line">LOAD CSV WITH HEADERS FROM &#x27;file:///data.csv&#x27; AS row</span><br><span class="line">WITH row WHERE row.age IS NOT NULL</span><br><span class="line">CREATE (p:Person)</span><br><span class="line">SET p = row,</span><br><span class="line">    p.age = toInteger(row.age),</span><br><span class="line">    p.salary = toFloat(row.salary)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="📊-所有关键字速查表"><a href="#📊-所有关键字速查表" class="headerlink" title="📊 所有关键字速查表"></a>📊 <strong>所有关键字速查表</strong></h2><table>
<thead>
<tr>
<th>类别</th>
<th>关键字</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>查询</td>
<td>MATCH</td>
<td>匹配图模式</td>
</tr>
<tr>
<td>查询</td>
<td>OPTIONAL MATCH</td>
<td>可选匹配</td>
</tr>
<tr>
<td>查询</td>
<td>WHERE</td>
<td>条件过滤</td>
</tr>
<tr>
<td>查询</td>
<td>RETURN</td>
<td>返回结果</td>
</tr>
<tr>
<td>查询</td>
<td>WITH</td>
<td>传递结果</td>
</tr>
<tr>
<td>查询</td>
<td>UNWIND</td>
<td>展开列表</td>
</tr>
<tr>
<td>查询</td>
<td>ORDER BY</td>
<td>排序</td>
</tr>
<tr>
<td>查询</td>
<td>SKIP</td>
<td>跳过记录</td>
</tr>
<tr>
<td>查询</td>
<td>LIMIT</td>
<td>限制数量</td>
</tr>
<tr>
<td>查询</td>
<td>DISTINCT</td>
<td>去重</td>
</tr>
<tr>
<td>数据</td>
<td>CREATE</td>
<td>创建</td>
</tr>
<tr>
<td>数据</td>
<td>MERGE</td>
<td>合并</td>
</tr>
<tr>
<td>数据</td>
<td>SET</td>
<td>设置属性</td>
</tr>
<tr>
<td>数据</td>
<td>REMOVE</td>
<td>移除属性/标签</td>
</tr>
<tr>
<td>数据</td>
<td>DELETE</td>
<td>删除</td>
</tr>
<tr>
<td>数据</td>
<td>DETACH DELETE</td>
<td>分离删除</td>
</tr>
<tr>
<td>模式</td>
<td>NOT</td>
<td>否定</td>
</tr>
<tr>
<td>模式</td>
<td>AND</td>
<td>与条件</td>
</tr>
<tr>
<td>模式</td>
<td>OR</td>
<td>或条件</td>
</tr>
<tr>
<td>模式</td>
<td>XOR</td>
<td>异或</td>
</tr>
<tr>
<td>模式</td>
<td>IN</td>
<td>包含</td>
</tr>
<tr>
<td>模式</td>
<td>STARTS WITH</td>
<td>开头匹配</td>
</tr>
<tr>
<td>模式</td>
<td>ENDS WITH</td>
<td>结尾匹配</td>
</tr>
<tr>
<td>模式</td>
<td>CONTAINS</td>
<td>包含</td>
</tr>
<tr>
<td>模式</td>
<td>REGEXP</td>
<td>正则</td>
</tr>
<tr>
<td>聚合</td>
<td>COUNT</td>
<td>计数</td>
</tr>
<tr>
<td>聚合</td>
<td>SUM</td>
<td>求和</td>
</tr>
<tr>
<td>聚合</td>
<td>AVG</td>
<td>平均</td>
</tr>
<tr>
<td>聚合</td>
<td>MIN</td>
<td>最小</td>
</tr>
<tr>
<td>聚合</td>
<td>MAX</td>
<td>最大</td>
</tr>
<tr>
<td>聚合</td>
<td>COLLECT</td>
<td>收集列表</td>
</tr>
<tr>
<td>函数</td>
<td>size()</td>
<td>大小</td>
</tr>
<tr>
<td>函数</td>
<td>labels()</td>
<td>标签列表</td>
</tr>
<tr>
<td>函数</td>
<td>type()</td>
<td>关系类型</td>
</tr>
<tr>
<td>函数</td>
<td>id()</td>
<td>ID</td>
</tr>
<tr>
<td>函数</td>
<td>properties()</td>
<td>属性</td>
</tr>
<tr>
<td>函数</td>
<td>nodes()</td>
<td>路径节点</td>
</tr>
<tr>
<td>函数</td>
<td>relationships()</td>
<td>路径关系</td>
</tr>
<tr>
<td>子查询</td>
<td>CALL</td>
<td>调用过程</td>
</tr>
<tr>
<td>子查询</td>
<td>YIELD</td>
<td>产生结果</td>
</tr>
<tr>
<td>子查询</td>
<td>UNION</td>
<td>并集</td>
</tr>
<tr>
<td>子查询</td>
<td>UNION ALL</td>
<td>并集(含重复)</td>
</tr>
<tr>
<td>条件</td>
<td>CASE</td>
<td>条件表达式</td>
</tr>
<tr>
<td>条件</td>
<td>WHEN</td>
<td>条件分支</td>
</tr>
<tr>
<td>条件</td>
<td>THEN</td>
<td>条件结果</td>
</tr>
<tr>
<td>条件</td>
<td>ELSE</td>
<td>默认值</td>
</tr>
<tr>
<td>条件</td>
<td>END</td>
<td>条件结束</td>
</tr>
<tr>
<td>约束</td>
<td>CREATE CONSTRAINT</td>
<td>创建约束</td>
</tr>
<tr>
<td>约束</td>
<td>DROP CONSTRAINT</td>
<td>删除约束</td>
</tr>
<tr>
<td>索引</td>
<td>CREATE INDEX</td>
<td>创建索引</td>
</tr>
<tr>
<td>索引</td>
<td>DROP INDEX</td>
<td>删除索引</td>
</tr>
<tr>
<td>事务</td>
<td>BEGIN</td>
<td>开始事务</td>
</tr>
<tr>
<td>事务</td>
<td>COMMIT</td>
<td>提交事务</td>
</tr>
<tr>
<td>事务</td>
<td>ROLLBACK</td>
<td>回滚事务</td>
</tr>
<tr>
<td>管理</td>
<td>SHOW</td>
<td>显示信息</td>
</tr>
<tr>
<td>管理</td>
<td>EXPLAIN</td>
<td>解释计划</td>
</tr>
<tr>
<td>管理</td>
<td>PROFILE</td>
<td>性能分析</td>
</tr>
<tr>
<td>导入</td>
<td>LOAD CSV</td>
<td>加载 CSV</td>
</tr>
</tbody></table>
<hr>
<h2 id="🎯-最佳实践提示"><a href="#🎯-最佳实践提示" class="headerlink" title="🎯 最佳实践提示"></a>🎯 <strong>最佳实践提示</strong></h2><ol>
<li><p><strong>性能优化</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 使用索引字段</span><br><span class="line">CREATE INDEX FOR (p:Person) ON (p.name)</span><br><span class="line">MATCH (p:Person) WHERE p.name = &#x27;张三&#x27;  -- 快速</span><br><span class="line"></span><br><span class="line">-- 避免全表扫描</span><br><span class="line">MATCH (p:Person) WHERE p.age &gt; 30  -- 慢，如果没有索引</span><br></pre></td></tr></table></figure></li>
<li><p><strong>批量操作</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 使用 UNWIND 批量处理</span><br><span class="line">WITH range(1, 1000) AS ids</span><br><span class="line">UNWIND ids AS id</span><br><span class="line">CREATE (:Person &#123;id: id, name: &#x27;User&#x27; + id&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p><strong>避免笛卡尔积</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 错误：可能产生笛卡尔积</span><br><span class="line">MATCH (a:Person), (b:Person)  -- 避免这样写</span><br><span class="line"></span><br><span class="line">-- 正确：使用模式匹配</span><br><span class="line">MATCH (a:Person)-[:FRIEND]-&gt;(b:Person)</span><br></pre></td></tr></table></figure></li>
<li><p><strong>内存管理</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 使用 LIMIT 分批处理</span><br><span class="line">MATCH (p:Person)</span><br><span class="line">WITH p LIMIT 1000</span><br><span class="line">SET p.processed = true</span><br></pre></td></tr></table></figure></li>
<li><p><strong>使用参数</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 参数化查询</span><br><span class="line">:param name =&gt; &#x27;张三&#x27;</span><br><span class="line">MATCH (p:Person &#123;name: $name&#125;)</span><br><span class="line">RETURN p</span><br></pre></td></tr></table></figure></li>
</ol>
<p>这个列表包含了 Neo4j Cypher 查询语言的所有关键字及其用法示例。在实际使用中，根据具体需求选择合适的关键字和模式。</p>

  </div>
</article>


    <div class="blog-post-comments">
        <div id="utterances_thread">
            <noscript>加载评论需要在浏览器启用 JavaScript 脚本支持。</noscript>
        </div>
    </div>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/blog/">首页</a></li>
         
          <li><a href="/blog/about/">关于</a></li>
         
          <li><a href="/blog/archives/">归档</a></li>
         
          <li><a href="/blog/categories/">分类</a></li>
         
          <li><a href="/blog/search/">搜索</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/shenjy06">项目</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Neo4j-%E7%9A%84%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">Neo4j 的简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">底层原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">3.</span> <span class="toc-text">使用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E3%80%8C%E4%B8%80%E5%AE%9A%E8%A6%81%E3%80%8D%E8%80%83%E8%99%91-Neo4j%EF%BC%9F"><span class="toc-number">3.1.</span> <span class="toc-text">一、什么时候「一定要」考虑 Neo4j？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-%E6%95%B0%E6%8D%AE%E7%9A%84%E3%80%8C%E5%85%B3%E7%B3%BB%E3%80%8D%E6%AF%94%E3%80%8C%E6%95%B0%E6%8D%AE%E6%9C%AC%E8%BA%AB%E3%80%8D%E6%9B%B4%E9%87%8D%E8%A6%81"><span class="toc-number">3.1.1.</span> <span class="toc-text">1️⃣ 数据的「关系」比「数据本身」更重要</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-%E9%9C%80%E8%A6%81%E9%A2%91%E7%B9%81%E5%81%9A%E3%80%8C%E5%A4%9A%E8%B7%B3%E5%85%B3%E7%B3%BB%E6%9F%A5%E8%AF%A2%E3%80%8D%EF%BC%882-%E8%B7%B3%E3%80%813-%E8%B7%B3%E3%80%81N-%E8%B7%B3%EF%BC%89"><span class="toc-number">3.1.2.</span> <span class="toc-text">2️⃣ 需要频繁做「多跳关系查询」（2 跳、3 跳、N 跳）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3-%E5%85%B3%E7%B3%BB%E6%95%B0%E9%87%8F%E5%B7%A8%E5%A4%A7%EF%BC%8C%E4%B8%94%E8%BF%9C%E5%A4%A7%E4%BA%8E%E5%AE%9E%E4%BD%93%E6%95%B0%E9%87%8F"><span class="toc-number">3.1.3.</span> <span class="toc-text">3️⃣ 关系数量巨大，且远大于实体数量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%B8%8F%E2%83%A3-%E5%85%B3%E7%B3%BB%E7%B1%BB%E5%9E%8B%E5%A4%9A%E3%80%81%E7%BB%8F%E5%B8%B8%E5%8F%98%E5%8C%96"><span class="toc-number">3.1.4.</span> <span class="toc-text">4️⃣ 关系类型多、经常变化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%B8%8F%E2%83%A3-%E9%9C%80%E8%A6%81%E5%81%9A%E3%80%8C%E5%85%B3%E7%B3%BB%E6%8E%A8%E7%90%86-%E5%9B%BE%E7%AE%97%E6%B3%95%E3%80%8D"><span class="toc-number">3.1.5.</span> <span class="toc-text">5️⃣ 需要做「关系推理 &#x2F; 图算法」</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%B8%8F%E2%83%A3-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%A4%A9%E7%84%B6%E6%98%AF%E3%80%8C%E5%9B%BE%E3%80%8D"><span class="toc-number">3.1.6.</span> <span class="toc-text">6️⃣ 数据结构天然是「图」</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%9C%80%E5%85%B8%E5%9E%8B%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%88%E9%AB%98%E5%91%BD%E4%B8%AD%EF%BC%89"><span class="toc-number">3.2.</span> <span class="toc-text">二、最典型的使用场景（高命中）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-1-%E7%A4%BE%E4%BA%A4%E7%BD%91%E7%BB%9C"><span class="toc-number">3.2.1.</span> <span class="toc-text">🔹 1. 社交网络</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-2-%E9%A3%8E%E6%8E%A7-%E5%8F%8D%E6%AC%BA%E8%AF%88%EF%BC%88%E9%9D%9E%E5%B8%B8%E9%80%82%E5%90%88%EF%BC%89"><span class="toc-number">3.2.2.</span> <span class="toc-text">🔹 2. 风控 &#x2F; 反欺诈（非常适合）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-3-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%EF%BC%88%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-number">3.2.3.</span> <span class="toc-text">🔹 3. 推荐系统（关系型推荐）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-4-%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1"><span class="toc-number">3.2.4.</span> <span class="toc-text">🔹 4. 知识图谱</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-5-IT-%E8%BF%90%E7%BB%B4-%E6%8B%93%E6%89%91-%E4%BE%9D%E8%B5%96%E5%88%86%E6%9E%90"><span class="toc-number">3.2.5.</span> <span class="toc-text">🔹 5. IT 运维 &#x2F; 拓扑 &#x2F; 依赖分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-6-%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90-%E4%BE%9D%E8%B5%96%E5%9B%BE"><span class="toc-number">3.2.6.</span> <span class="toc-text">🔹 6. 代码分析 &#x2F; 依赖图</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E3%80%8C%E4%B8%8D%E8%AF%A5%E3%80%8D%E7%94%A8-Neo4j%EF%BC%9F"><span class="toc-number">3.3.</span> <span class="toc-text">三、什么时候「不该」用 Neo4j？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9D%8C-1-%E7%BA%AF-CRUD-%E8%A1%A8%E7%BB%93%E6%9E%84%E7%A8%B3%E5%AE%9A"><span class="toc-number">3.3.1.</span> <span class="toc-text">❌ 1. 纯 CRUD + 表结构稳定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9D%8C-2-%E5%A4%A7%E9%87%8F%E8%81%9A%E5%90%88-%E6%8A%A5%E8%A1%A8-OLAP"><span class="toc-number">3.3.2.</span> <span class="toc-text">❌ 2. 大量聚合 &#x2F; 报表 &#x2F; OLAP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9D%8C-3-%E5%8F%AA%E6%98%AF%E2%80%9C%E6%9C%89%E5%A4%96%E9%94%AE%E2%80%9D%EF%BC%8C%E4%BD%86%E4%B8%8D%E9%9C%80%E8%A6%81%E5%A4%9A%E8%B7%B3"><span class="toc-number">3.3.3.</span> <span class="toc-text">❌ 3. 只是“有外键”，但不需要多跳</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9D%8C-4-%E5%BC%BA%E4%BA%8B%E5%8A%A1-%E9%AB%98%E5%B9%B6%E5%8F%91%E5%86%99%E5%85%A5"><span class="toc-number">3.3.4.</span> <span class="toc-text">❌ 4. 强事务 + 高并发写入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E5%86%B3%E7%AD%96%E5%8F%A3%E8%AF%80"><span class="toc-number">3.4.</span> <span class="toc-text">四、一个简单的决策口诀</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E7%BB%99%E4%BD%A0%E4%B8%80%E4%B8%AA%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE%EF%BC%88%E5%BE%88%E9%87%8D%E8%A6%81%EF%BC%89"><span class="toc-number">3.5.</span> <span class="toc-text">五、给你一个工程实践建议（很重要）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">4.</span> <span class="toc-text">对比关系型数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">5.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cypher-%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80"><span class="toc-number">6.</span> <span class="toc-text">Cypher 查询语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%8A%82%E7%82%B9-CREATE"><span class="toc-number">6.1.</span> <span class="toc-text">创建节点 CREATE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E7%B4%A2%E8%AF%AD%E5%8F%A5-MATCH"><span class="toc-number">6.2.</span> <span class="toc-text">检索语句 MATCH</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RETURN-%E8%BF%94%E5%9B%9E"><span class="toc-number">6.3.</span> <span class="toc-text">RETURN 返回</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%85%B3%E7%B3%BB-CREATE"><span class="toc-number">6.4.</span> <span class="toc-text">创建关系 CREATE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WHERE-%E6%9D%A1%E4%BB%B6"><span class="toc-number">6.5.</span> <span class="toc-text">WHERE 条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E5%B7%B2%E6%9C%89%E7%9A%84%E8%8A%82%E7%82%B9%E6%B7%BB%E5%8A%A0%E5%85%B3%E7%B3%BB"><span class="toc-number">6.6.</span> <span class="toc-text">对已有的节点添加关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9-%E5%85%B3%E7%B3%BB"><span class="toc-number">6.7.</span> <span class="toc-text">删除节点|关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#REMOVE-%E5%91%BD%E4%BB%A4"><span class="toc-number">6.8.</span> <span class="toc-text">REMOVE 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SET-%E5%91%BD%E4%BB%A4"><span class="toc-number">6.9.</span> <span class="toc-text">SET 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ORDER-BY"><span class="toc-number">6.10.</span> <span class="toc-text">ORDER BY</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UNION-UNION-ALL"><span class="toc-number">6.11.</span> <span class="toc-text">UNION | UNION ALL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SKIP-LIMIT-%E5%AD%97%E5%8F%A5"><span class="toc-number">6.12.</span> <span class="toc-text">SKIP | LIMIT 字句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MERGE-%E5%91%BD%E4%BB%A4"><span class="toc-number">6.13.</span> <span class="toc-text">MERGE 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NULL-%E5%80%BC"><span class="toc-number">6.14.</span> <span class="toc-text">NULL 值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IN-%E5%91%BD%E4%BB%A4"><span class="toc-number">6.15.</span> <span class="toc-text">IN 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Neo4j-%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">6.16.</span> <span class="toc-text">Neo4j 中的函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E5%87%BD%E6%95%B0"><span class="toc-number">6.17.</span> <span class="toc-text">关系函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8E-SpringBoot-%E9%9B%86%E6%88%90"><span class="toc-number">6.18.</span> <span class="toc-text">与 SpringBoot 集成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%9A-%E6%89%80%E6%9C%89%E5%85%B3%E9%94%AE%E5%AD%97%E7%9B%AE%E5%BD%95"><span class="toc-number">7.</span> <span class="toc-text">📚 所有关键字目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%9F%A5%E8%AF%A2%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">8.</span> <span class="toc-text">1. 查询关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MATCH-%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F"><span class="toc-number">8.1.</span> <span class="toc-text">MATCH - 匹配模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OPTIONAL-MATCH-%E5%8F%AF%E9%80%89%E5%8C%B9%E9%85%8D"><span class="toc-number">8.2.</span> <span class="toc-text">OPTIONAL MATCH - 可选匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WHERE-%E6%9D%A1%E4%BB%B6%E8%BF%87%E6%BB%A4"><span class="toc-number">8.3.</span> <span class="toc-text">WHERE - 条件过滤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RETURN-%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C"><span class="toc-number">8.4.</span> <span class="toc-text">RETURN - 返回结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WITH-%E4%BC%A0%E9%80%92%E7%BB%93%E6%9E%9C"><span class="toc-number">8.5.</span> <span class="toc-text">WITH - 传递结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UNWIND-%E5%B1%95%E5%BC%80%E5%88%97%E8%A1%A8"><span class="toc-number">8.6.</span> <span class="toc-text">UNWIND - 展开列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ORDER-BY-%E6%8E%92%E5%BA%8F"><span class="toc-number">8.7.</span> <span class="toc-text">ORDER BY - 排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SKIP-%E8%B7%B3%E8%BF%87%E8%AE%B0%E5%BD%95"><span class="toc-number">8.8.</span> <span class="toc-text">SKIP - 跳过记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LIMIT-%E9%99%90%E5%88%B6%E8%AE%B0%E5%BD%95%E6%95%B0"><span class="toc-number">8.9.</span> <span class="toc-text">LIMIT - 限制记录数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DISTINCT-%E5%8E%BB%E9%87%8D"><span class="toc-number">8.10.</span> <span class="toc-text">DISTINCT - 去重</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">9.</span> <span class="toc-text">2. 数据操作关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CREATE-%E5%88%9B%E5%BB%BA"><span class="toc-number">9.1.</span> <span class="toc-text">CREATE - 创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MERGE-%E5%90%88%E5%B9%B6%EF%BC%88%E5%AD%98%E5%9C%A8%E5%88%99%E6%9B%B4%E6%96%B0%EF%BC%8C%E4%B8%8D%E5%AD%98%E5%9C%A8%E5%88%99%E5%88%9B%E5%BB%BA%EF%BC%89"><span class="toc-number">9.2.</span> <span class="toc-text">MERGE - 合并（存在则更新，不存在则创建）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SET-%E8%AE%BE%E7%BD%AE%E5%B1%9E%E6%80%A7"><span class="toc-number">9.3.</span> <span class="toc-text">SET - 设置属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#REMOVE-%E7%A7%BB%E9%99%A4%E5%B1%9E%E6%80%A7%E6%88%96%E6%A0%87%E7%AD%BE"><span class="toc-number">9.4.</span> <span class="toc-text">REMOVE - 移除属性或标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DELETE-%E5%88%A0%E9%99%A4"><span class="toc-number">9.5.</span> <span class="toc-text">DELETE - 删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DETACH-DELETE-%E5%88%86%E7%A6%BB%E5%88%A0%E9%99%A4%EF%BC%88%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9%E5%8F%8A%E5%85%B6%E5%85%B3%E7%B3%BB%EF%BC%89"><span class="toc-number">9.6.</span> <span class="toc-text">DETACH DELETE - 分离删除（删除节点及其关系）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">10.</span> <span class="toc-text">3. 模式匹配关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#NOT-%E5%90%A6%E5%AE%9A"><span class="toc-number">10.1.</span> <span class="toc-text">NOT - 否定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OR-%E6%88%96%E6%9D%A1%E4%BB%B6"><span class="toc-number">10.2.</span> <span class="toc-text">OR - 或条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AND-%E4%B8%8E%E6%9D%A1%E4%BB%B6"><span class="toc-number">10.3.</span> <span class="toc-text">AND - 与条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XOR-%E5%BC%82%E6%88%96%E6%9D%A1%E4%BB%B6"><span class="toc-number">10.4.</span> <span class="toc-text">XOR - 异或条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IN-%E5%8C%85%E5%90%AB"><span class="toc-number">10.5.</span> <span class="toc-text">IN - 包含</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STARTS-WITH-%E5%BC%80%E5%A4%B4%E5%8C%B9%E9%85%8D"><span class="toc-number">10.6.</span> <span class="toc-text">STARTS WITH - 开头匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ENDS-WITH-%E7%BB%93%E5%B0%BE%E5%8C%B9%E9%85%8D"><span class="toc-number">10.7.</span> <span class="toc-text">ENDS WITH - 结尾匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CONTAINS-%E5%8C%85%E5%90%AB%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">10.8.</span> <span class="toc-text">CONTAINS - 包含字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#REGEXP-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">10.9.</span> <span class="toc-text">REGEXP - 正则表达式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%81%9A%E5%90%88%E5%92%8C%E5%87%BD%E6%95%B0%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">11.</span> <span class="toc-text">4. 聚合和函数关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#COUNT-%E8%AE%A1%E6%95%B0"><span class="toc-number">11.1.</span> <span class="toc-text">COUNT - 计数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SUM-%E6%B1%82%E5%92%8C"><span class="toc-number">11.2.</span> <span class="toc-text">SUM - 求和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AVG-%E5%B9%B3%E5%9D%87%E5%80%BC"><span class="toc-number">11.3.</span> <span class="toc-text">AVG - 平均值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MIN-%E6%9C%80%E5%B0%8F%E5%80%BC"><span class="toc-number">11.4.</span> <span class="toc-text">MIN - 最小值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MAX-%E6%9C%80%E5%A4%A7%E5%80%BC"><span class="toc-number">11.5.</span> <span class="toc-text">MAX - 最大值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#COLLECT-%E6%94%B6%E9%9B%86%E4%B8%BA%E5%88%97%E8%A1%A8"><span class="toc-number">11.6.</span> <span class="toc-text">COLLECT - 收集为列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#size-%E5%A4%A7%E5%B0%8F"><span class="toc-number">11.7.</span> <span class="toc-text">size() - 大小</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#labels-%E6%A0%87%E7%AD%BE%E5%88%97%E8%A1%A8"><span class="toc-number">11.8.</span> <span class="toc-text">labels() - 标签列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#type-%E5%85%B3%E7%B3%BB%E7%B1%BB%E5%9E%8B"><span class="toc-number">11.9.</span> <span class="toc-text">type() - 关系类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#id-%E8%8A%82%E7%82%B9-%E5%85%B3%E7%B3%BB-ID"><span class="toc-number">11.10.</span> <span class="toc-text">id() - 节点&#x2F;关系 ID</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#properties-%E5%B1%9E%E6%80%A7-Map"><span class="toc-number">11.11.</span> <span class="toc-text">properties() - 属性 Map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nodes-%E8%B7%AF%E5%BE%84%E4%B8%AD%E7%9A%84%E8%8A%82%E7%82%B9"><span class="toc-number">11.12.</span> <span class="toc-text">nodes() - 路径中的节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#relationships-%E8%B7%AF%E5%BE%84%E4%B8%AD%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">11.13.</span> <span class="toc-text">relationships() - 路径中的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#range-%E8%8C%83%E5%9B%B4"><span class="toc-number">11.14.</span> <span class="toc-text">range() - 范围</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%92%8C%E8%BF%87%E7%A8%8B%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">12.</span> <span class="toc-text">5. 子查询和过程关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CALL-%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">12.1.</span> <span class="toc-text">CALL - 调用过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#YIELD-%E4%BA%A7%E7%94%9F%E7%BB%93%E6%9E%9C"><span class="toc-number">12.2.</span> <span class="toc-text">YIELD - 产生结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UNION-%E5%B9%B6%E9%9B%86"><span class="toc-number">12.3.</span> <span class="toc-text">UNION - 并集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UNION-ALL-%E5%B9%B6%E9%9B%86%EF%BC%88%E5%8C%85%E5%90%AB%E9%87%8D%E5%A4%8D%EF%BC%89"><span class="toc-number">12.4.</span> <span class="toc-text">UNION ALL - 并集（包含重复）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CASE-%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">12.5.</span> <span class="toc-text">CASE - 条件表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WHEN-CASE-%E5%AD%90%E5%8F%A5"><span class="toc-number">12.6.</span> <span class="toc-text">WHEN - CASE 子句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#THEN-CASE-%E7%BB%93%E6%9E%9C"><span class="toc-number">12.7.</span> <span class="toc-text">THEN - CASE 结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ELSE-CASE-%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">12.8.</span> <span class="toc-text">ELSE - CASE 默认值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#END-CASE-%E7%BB%93%E6%9D%9F"><span class="toc-number">12.9.</span> <span class="toc-text">END - CASE 结束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%BA%A6%E6%9D%9F%E5%92%8C%E7%B4%A2%E5%BC%95%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">13.</span> <span class="toc-text">6. 约束和索引关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CREATE-CONSTRAINT-%E5%88%9B%E5%BB%BA%E7%BA%A6%E6%9D%9F"><span class="toc-number">13.1.</span> <span class="toc-text">CREATE CONSTRAINT - 创建约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DROP-CONSTRAINT-%E5%88%A0%E9%99%A4%E7%BA%A6%E6%9D%9F"><span class="toc-number">13.2.</span> <span class="toc-text">DROP CONSTRAINT - 删除约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CREATE-INDEX-%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">13.3.</span> <span class="toc-text">CREATE INDEX - 创建索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DROP-INDEX-%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-number">13.4.</span> <span class="toc-text">DROP INDEX - 删除索引</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">14.</span> <span class="toc-text">7. 事务控制关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#BEGIN-%E5%BC%80%E5%A7%8B%E4%BA%8B%E5%8A%A1"><span class="toc-number">14.1.</span> <span class="toc-text">BEGIN - 开始事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#COMMIT-%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1"><span class="toc-number">14.2.</span> <span class="toc-text">COMMIT - 提交事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ROLLBACK-%E5%9B%9E%E6%BB%9A%E4%BA%8B%E5%8A%A1"><span class="toc-number">14.3.</span> <span class="toc-text">ROLLBACK - 回滚事务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E7%AE%A1%E7%90%86%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">15.</span> <span class="toc-text">8. 管理关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SHOW-%E6%98%BE%E7%A4%BA%E4%BF%A1%E6%81%AF"><span class="toc-number">15.1.</span> <span class="toc-text">SHOW - 显示信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EXPLAIN-%E8%A7%A3%E9%87%8A%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92"><span class="toc-number">15.2.</span> <span class="toc-text">EXPLAIN - 解释执行计划</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PROFILE-%E5%88%86%E6%9E%90%E6%9F%A5%E8%AF%A2%E6%80%A7%E8%83%BD"><span class="toc-number">15.3.</span> <span class="toc-text">PROFILE - 分析查询性能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LOAD-CSV-%E5%8A%A0%E8%BD%BD-CSV"><span class="toc-number">15.4.</span> <span class="toc-text">LOAD CSV - 加载 CSV</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%8A-%E6%89%80%E6%9C%89%E5%85%B3%E9%94%AE%E5%AD%97%E9%80%9F%E6%9F%A5%E8%A1%A8"><span class="toc-number">16.</span> <span class="toc-text">📊 所有关键字速查表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%AF-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%8F%90%E7%A4%BA"><span class="toc-number">17.</span> <span class="toc-text">🎯 最佳实践提示</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&text=Neo4j 学习笔记"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=Neo4j 学习笔记"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&is_video=false&description=Neo4j 学习笔记"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Neo4j 学习笔记&body=Check out this article: https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=Neo4j 学习笔记"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=Neo4j 学习笔记"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=Neo4j 学习笔记"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=Neo4j 学习笔记"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&name=Neo4j 学习笔记&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://shenjy06.github.io/blog/2025/12/28/Neo4j%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&t=Neo4j 学习笔记"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;   2020-2026 Mark Shen
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       -->
        <li>
          <a href="/blog/"
            >首页</a
          >
        </li>
        <!--
     --><!--
       -->
        <li>
          <a href="/blog/about/"
            >关于</a
          >
        </li>
        <!--
     --><!--
       -->
        <li>
          <a href="/blog/archives/"
            >归档</a
          >
        </li>
        <!--
     --><!--
       -->
        <li>
          <a href="/blog/categories/"
            >分类</a
          >
        </li>
        <!--
     --><!--
       -->
        <li>
          <a href="/blog/search/"
            >搜索</a
          >
        </li>
        <!--
     --><!--
       -->
        <li>
          <a target="_blank" rel="noopener" href="https://github.com/shenjy06"
            >项目</a
          >
        </li>
        <!--
     -->
      </ul>
      <ul>
        <!-- Baidu Web Analytics -->
        <script>
          var _hmt = _hmt || []
          ;(function () {
            var hm = document.createElement('script')
            hm.src =
              'https://hm.baidu.com/hm.js?2bf556e2c4bfb436b933c9c12d4a0057'
            var s = document.getElementsByTagName('script')[0]
            s.parentNode.insertBefore(hm, s)
          })()
        </script>
        <!-- End Baidu Web Analytics -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板！\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功！");
      e.clearSelection();
    })
  })
  </script>


<script src="/blog/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

  <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?2bf556e2c4bfb436b933c9c12d4a0057";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
        </script>

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

    <script type="text/javascript">
      var utterances_repo = 'shenjy06/blog';
      var utterances_issue_term = 'pathname';
      var utterances_label = 'Comment';
      var utterances_theme = 'github-light';

      (function(){
          var script = document.createElement('script');

          script.src = 'https://utteranc.es/client.js';
          script.setAttribute('repo', utterances_repo);
          script.setAttribute('issue-term', 'pathname');
          script.setAttribute('label', utterances_label);
          script.setAttribute('theme', utterances_theme);
          script.setAttribute('crossorigin', 'anonymous');
          script.async = true;
          (document.getElementById('utterances_thread')).appendChild(script);
      }());
  </script>

</body>
</html>
