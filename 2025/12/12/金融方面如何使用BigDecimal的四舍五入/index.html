<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="åœ¨é‡‘èé¢†åŸŸï¼Œä½¿ç”¨ BigDecimal è¿›è¡Œå››èˆäº”å…¥æ˜¯å¿…é¡»çš„ï¼Œå› ä¸º double å’Œ float å­˜åœ¨ç²¾åº¦æŸå¤±ã€‚ä»¥ä¸‹æ˜¯é‡‘èåœºæ™¯ä¸‹ BigDecimal å››èˆäº”å…¥çš„å®Œæ•´æŒ‡å—ã€‚ ğŸ“Š æ ¸å¿ƒè¦ç‚¹ï¼šRoundingMode æšä¸¾Java æä¾›äº† 8 ç§èˆå…¥æ¨¡å¼ï¼Œé‡‘èä¸šåŠ¡ä¸»è¦ä½¿ç”¨ä»¥ä¸‹ 4 ç§ï¼š    èˆå…¥æ¨¡å¼ è¡Œä¸ºæè¿° é‡‘èåº”ç”¨åœºæ™¯ ç¤ºä¾‹ (ä¿ç•™2ä½å°æ•°)    HALF_UP å››èˆäº”å…¥ (æœ€å¸¸ç”¨) åˆ©æ¯è®¡">
<meta property="og:type" content="article">
<meta property="og:title" content="å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜">
<meta property="og:url" content="https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/index.html">
<meta property="og:site_name" content="Mark&#39;s Blog">
<meta property="og:description" content="åœ¨é‡‘èé¢†åŸŸï¼Œä½¿ç”¨ BigDecimal è¿›è¡Œå››èˆäº”å…¥æ˜¯å¿…é¡»çš„ï¼Œå› ä¸º double å’Œ float å­˜åœ¨ç²¾åº¦æŸå¤±ã€‚ä»¥ä¸‹æ˜¯é‡‘èåœºæ™¯ä¸‹ BigDecimal å››èˆäº”å…¥çš„å®Œæ•´æŒ‡å—ã€‚ ğŸ“Š æ ¸å¿ƒè¦ç‚¹ï¼šRoundingMode æšä¸¾Java æä¾›äº† 8 ç§èˆå…¥æ¨¡å¼ï¼Œé‡‘èä¸šåŠ¡ä¸»è¦ä½¿ç”¨ä»¥ä¸‹ 4 ç§ï¼š    èˆå…¥æ¨¡å¼ è¡Œä¸ºæè¿° é‡‘èåº”ç”¨åœºæ™¯ ç¤ºä¾‹ (ä¿ç•™2ä½å°æ•°)    HALF_UP å››èˆäº”å…¥ (æœ€å¸¸ç”¨) åˆ©æ¯è®¡">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-12-12T18:07:59.000Z">
<meta property="article:modified_time" content="2025-12-23T03:17:11.325Z">
<meta property="article:author" content="Mark Shen">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/blog/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/blog/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/blog/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
      <link rel="alternate" href="/blog/true" title="Mark&#39;s Blog" type="application/atom+xml" />
    
	<!-- mathjax -->
	
		<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			  inlineMath: [['$','$']]
			}
		  });
		</script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
	
<meta name="generator" content="Hexo 5.4.2"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="ç›®å½•"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="ç›®å½•"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="é¡¶éƒ¨" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/blog/">é¦–é¡µ</a></li><!--
     --><!--
       --><li><a href="/blog/about/">å…³äº</a></li><!--
     --><!--
       --><li><a href="/blog/archives/">å½’æ¡£</a></li><!--
     --><!--
       --><li><a href="/blog/categories/">åˆ†ç±»</a></li><!--
     --><!--
       --><li><a href="/blog/search/">æœç´¢</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/shenjy06">é¡¹ç›®</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="ä¸Šä¸€ç¯‡" href="/blog/2025/12/18/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="ä¸‹ä¸€ç¯‡" href="/blog/2025/12/11/Amazon_cool_culture/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="è¿”å›é¡¶éƒ¨" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="åˆ†äº«æ–‡ç« " href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&text=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&title=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&is_video=false&description=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜&body=Check out this article: https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&title=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&title=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&title=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&title=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&name=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&t=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%8A-%E6%A0%B8%E5%BF%83%E8%A6%81%E7%82%B9%EF%BC%9ARoundingMode-%E6%9E%9A%E4%B8%BE"><span class="toc-number">1.</span> <span class="toc-text">ğŸ“Š æ ¸å¿ƒè¦ç‚¹ï¼šRoundingMode æšä¸¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%92%B0-%E9%87%91%E8%9E%8D%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-number">2.</span> <span class="toc-text">ğŸ’° é‡‘èä¸šåŠ¡ä»£ç ç¤ºä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5-%E9%87%91%E9%A2%9D%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">2.1.</span> <span class="toc-text">1. åŸºç¡€å››èˆäº”å…¥ (é‡‘é¢æ ¼å¼åŒ–)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%8D%E5%90%8C%E9%87%91%E8%9E%8D%E5%9C%BA%E6%99%AF%E7%9A%84%E8%88%8D%E5%85%A5%E7%AD%96%E7%95%A5"><span class="toc-number">2.2.</span> <span class="toc-text">2. ä¸åŒé‡‘èåœºæ™¯çš„èˆå…¥ç­–ç•¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%99%A4%E6%B3%95%E8%BF%90%E7%AE%97%E7%9A%84%E7%B2%BE%E5%BA%A6%E6%8E%A7%E5%88%B6-%E5%85%B3%E9%94%AE"><span class="toc-number">2.3.</span> <span class="toc-text">3. é™¤æ³•è¿ç®—çš„ç²¾åº¦æ§åˆ¶ (å…³é”®!)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E9%87%91%E8%9E%8D%E8%AE%A1%E7%AE%97%E9%BB%84%E9%87%91%E6%B3%95%E5%88%99"><span class="toc-number">3.</span> <span class="toc-text">âš ï¸ é‡‘èè®¡ç®—é»„é‡‘æ³•åˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%A7-%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">4.</span> <span class="toc-text">ğŸ”§ å®ç”¨å·¥å…·ç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%9C-%E4%B9%9D%E5%A4%A7%E6%A0%B8%E5%BF%83%E9%93%81%E5%BE%8B"><span class="toc-number">5.</span> <span class="toc-text">ğŸ“œ ä¹å¤§æ ¸å¿ƒé“å¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B1%EF%BC%9A%E7%BB%9D%E5%AF%B9%E7%A6%81%E7%94%A8%E6%B5%AE%E7%82%B9%E5%9E%8B"><span class="toc-number">5.1.</span> <span class="toc-text">é“å¾‹1ï¼šç»å¯¹ç¦ç”¨æµ®ç‚¹å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B2%EF%BC%9A%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9E%84%E9%80%A0BigDecimal"><span class="toc-number">5.2.</span> <span class="toc-text">é“å¾‹2ï¼šå­—ç¬¦ä¸²æ„é€ BigDecimal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B3%EF%BC%9A%E9%99%A4%E6%B3%95%E5%BF%85%E9%A1%BB%E6%8C%87%E5%AE%9A%E7%B2%BE%E5%BA%A6"><span class="toc-number">5.3.</span> <span class="toc-text">é“å¾‹3ï¼šé™¤æ³•å¿…é¡»æŒ‡å®šç²¾åº¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B4%EF%BC%9A%E8%88%8D%E5%85%A5%E6%A8%A1%E5%BC%8F%E5%BF%85%E9%A1%BB%E6%98%8E%E7%A1%AE"><span class="toc-number">5.4.</span> <span class="toc-text">é“å¾‹4ï¼šèˆå…¥æ¨¡å¼å¿…é¡»æ˜ç¡®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B5%EF%BC%9A%E7%BB%9F%E4%B8%80%E7%B2%BE%E5%BA%A6%E7%AE%A1%E7%90%86"><span class="toc-number">5.5.</span> <span class="toc-text">é“å¾‹5ï¼šç»Ÿä¸€ç²¾åº¦ç®¡ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B6%EF%BC%9A%E6%AF%94%E8%BE%83%E5%BF%85%E9%A1%BB%E7%94%A8compareTo"><span class="toc-number">5.6.</span> <span class="toc-text">é“å¾‹6ï¼šæ¯”è¾ƒå¿…é¡»ç”¨compareTo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B7%EF%BC%9A%E9%9B%B6%E5%80%BC%E5%BF%85%E9%A1%BB%E7%94%A8BigDecimal-ZERO"><span class="toc-number">5.7.</span> <span class="toc-text">é“å¾‹7ï¼šé›¶å€¼å¿…é¡»ç”¨BigDecimal.ZERO</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B8%EF%BC%9A%E5%BA%8F%E5%88%97%E5%8C%96%E5%BF%85%E9%A1%BB%E4%BF%9D%E6%8C%81%E7%B2%BE%E5%BA%A6"><span class="toc-number">5.8.</span> <span class="toc-text">é“å¾‹8ï¼šåºåˆ—åŒ–å¿…é¡»ä¿æŒç²¾åº¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B9%EF%BC%9A%E8%BE%B9%E7%95%8C%E6%9D%A1%E4%BB%B6%E5%BF%85%E9%A1%BB%E5%A4%84%E7%90%86"><span class="toc-number">5.9.</span> <span class="toc-text">é“å¾‹9ï¼šè¾¹ç•Œæ¡ä»¶å¿…é¡»å¤„ç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8F%A6-%E9%87%91%E8%9E%8D%E4%B8%9A%E5%8A%A1%E4%B8%93%E7%94%A8%E8%AE%A1%E7%AE%97%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.</span> <span class="toc-text">ğŸ¦ é‡‘èä¸šåŠ¡ä¸“ç”¨è®¡ç®—æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E4%B8%80%EF%BC%9A%E5%88%A9%E6%81%AF%E8%AE%A1%E7%AE%97%E5%A5%97%E4%BB%B6"><span class="toc-number">6.1.</span> <span class="toc-text">æ¨¡å¼ä¸€ï¼šåˆ©æ¯è®¡ç®—å¥—ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E4%BA%8C%EF%BC%9A%E7%A8%8E%E5%8A%A1%E8%AE%A1%E7%AE%97%E5%BC%95%E6%93%8E"><span class="toc-number">6.2.</span> <span class="toc-text">æ¨¡å¼äºŒï¼šç¨åŠ¡è®¡ç®—å¼•æ“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E4%B8%89%EF%BC%9A%E9%87%91%E9%A2%9D%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A0%87%E5%87%86"><span class="toc-number">6.3.</span> <span class="toc-text">æ¨¡å¼ä¸‰ï¼šé‡‘é¢æ ¼å¼åŒ–æ ‡å‡†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%8D-%E5%AE%A1%E8%AE%A1%E4%B8%8E%E7%9B%91%E6%8E%A7"><span class="toc-number">7.</span> <span class="toc-text">ğŸ” å®¡è®¡ä¸ç›‘æ§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E5%AE%A1%E8%AE%A1%E6%97%A5%E5%BF%97"><span class="toc-number">7.1.</span> <span class="toc-text">è®¡ç®—å®¡è®¡æ—¥å¿—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B2%BE%E5%BA%A6%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6"><span class="toc-number">7.2.</span> <span class="toc-text">ç²¾åº¦ç›‘æ§å‘Šè­¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%8A-%E9%93%81%E5%BE%8B%E6%A3%80%E6%9F%A5%E6%B8%85%E5%8D%95"><span class="toc-number">8.</span> <span class="toc-text">ğŸ“Š é“å¾‹æ£€æŸ¥æ¸…å•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%92%8E-%E7%BB%88%E6%9E%81%E5%8E%9F%E5%88%99"><span class="toc-number">9.</span> <span class="toc-text">ğŸ’ ç»ˆæåŸåˆ™</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Mark Shen</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2025-12-12T18:07:59.000Z" itemprop="datePublished">2025-12-12</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/blog/tags/Java/" rel="tag">Java</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>åœ¨é‡‘èé¢†åŸŸï¼Œä½¿ç”¨ <code>BigDecimal</code> è¿›è¡Œå››èˆäº”å…¥æ˜¯<strong>å¿…é¡»</strong>çš„ï¼Œå› ä¸º <code>double</code> å’Œ <code>float</code> å­˜åœ¨ç²¾åº¦æŸå¤±ã€‚ä»¥ä¸‹æ˜¯é‡‘èåœºæ™¯ä¸‹ <code>BigDecimal</code> å››èˆäº”å…¥çš„å®Œæ•´æŒ‡å—ã€‚</p>
<h2 id="ğŸ“Š-æ ¸å¿ƒè¦ç‚¹ï¼šRoundingMode-æšä¸¾"><a href="#ğŸ“Š-æ ¸å¿ƒè¦ç‚¹ï¼šRoundingMode-æšä¸¾" class="headerlink" title="ğŸ“Š æ ¸å¿ƒè¦ç‚¹ï¼šRoundingMode æšä¸¾"></a>ğŸ“Š æ ¸å¿ƒè¦ç‚¹ï¼š<code>RoundingMode</code> æšä¸¾</h2><p>Java æä¾›äº† 8 ç§èˆå…¥æ¨¡å¼ï¼Œé‡‘èä¸šåŠ¡ä¸»è¦ä½¿ç”¨ä»¥ä¸‹ 4 ç§ï¼š</p>
<table>
<thead>
<tr>
<th align="left">èˆå…¥æ¨¡å¼</th>
<th align="left">è¡Œä¸ºæè¿°</th>
<th align="left">é‡‘èåº”ç”¨åœºæ™¯</th>
<th align="left">ç¤ºä¾‹ (ä¿ç•™2ä½å°æ•°)</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong><code>HALF_UP</code></strong></td>
<td align="left"><strong>å››èˆäº”å…¥</strong> (æœ€å¸¸ç”¨)</td>
<td align="left">åˆ©æ¯è®¡ç®—ã€é‡‘é¢æ ¼å¼åŒ–ã€é€šç”¨è®¡ç®—</td>
<td align="left">2.235 â†’ 2.24</td>
</tr>
<tr>
<td align="left"><strong><code>HALF_EVEN</code></strong></td>
<td align="left"><strong>é“¶è¡Œå®¶èˆå…¥æ³•</strong></td>
<td align="left">ç»Ÿè®¡ã€é™ä½ç´¯è®¡è¯¯å·®</td>
<td align="left">2.235 â†’ 2.24 (ä¸‹ä½å¶)</td>
</tr>
<tr>
<td align="left"><strong><code>UP</code></strong></td>
<td align="left"><strong>è¿œç¦»é›¶æ–¹å‘èˆå…¥</strong></td>
<td align="left">ç½šé‡‘ã€æ‰‹ç»­è´¹è®¡ç®— (å¯¹å®¢æˆ·ä¸åˆ©)</td>
<td align="left">2.231 â†’ 2.24</td>
</tr>
<tr>
<td align="left"><strong><code>DOWN</code></strong></td>
<td align="left"><strong>å‘é›¶æ–¹å‘èˆå…¥</strong></td>
<td align="left">ä¼˜æƒ é‡‘é¢ã€è®©åˆ©è®¡ç®— (å¯¹å®¢æˆ·æœ‰åˆ©)</td>
<td align="left">2.239 â†’ 2.23</td>
</tr>
<tr>
<td align="left"><strong><code>CEILING</code></strong></td>
<td align="left"><strong>å‘æ­£æ— ç©·å¤§èˆå…¥</strong></td>
<td align="left">ä¿è¯é‡‘ã€é£é™©å‡†å¤‡é‡‘</td>
<td align="left">2.231 â†’ 2.24</td>
</tr>
<tr>
<td align="left"><strong><code>FLOOR</code></strong></td>
<td align="left"><strong>å‘è´Ÿæ— ç©·å¤§èˆå…¥</strong></td>
<td align="left">èµ„äº§æŠ˜æ—§è®¡ç®—</td>
<td align="left">2.239 â†’ 2.23</td>
</tr>
</tbody></table>
<h2 id="ğŸ’°-é‡‘èä¸šåŠ¡ä»£ç ç¤ºä¾‹"><a href="#ğŸ’°-é‡‘èä¸šåŠ¡ä»£ç ç¤ºä¾‹" class="headerlink" title="ğŸ’° é‡‘èä¸šåŠ¡ä»£ç ç¤ºä¾‹"></a>ğŸ’° é‡‘èä¸šåŠ¡ä»£ç ç¤ºä¾‹</h2><h3 id="1-åŸºç¡€å››èˆäº”å…¥-é‡‘é¢æ ¼å¼åŒ–"><a href="#1-åŸºç¡€å››èˆäº”å…¥-é‡‘é¢æ ¼å¼åŒ–" class="headerlink" title="1. åŸºç¡€å››èˆäº”å…¥ (é‡‘é¢æ ¼å¼åŒ–)"></a>1. åŸºç¡€å››èˆäº”å…¥ (é‡‘é¢æ ¼å¼åŒ–)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.math.RoundingMode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FinancialRounding</span> &#123;</span><br><span class="line">    <span class="comment">// é€šç”¨é‡‘é¢å››èˆäº”å…¥ (ä¿ç•™2ä½å°æ•°ï¼ŒHALF_UP)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">roundAmount</span><span class="params">(BigDecimal amount)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (amount == <span class="literal">null</span>) <span class="keyword">return</span> BigDecimal.ZERO;</span><br><span class="line">        <span class="keyword">return</span> amount.setScale(<span class="number">2</span>, RoundingMode.HALF_UP);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ©æ¯è®¡ç®—ç¤ºä¾‹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">calculateInterest</span><span class="params">(BigDecimal principal, </span></span><br><span class="line"><span class="params">                                               BigDecimal annualRate, </span></span><br><span class="line"><span class="params">                                               <span class="type">int</span> days)</span> &#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">dailyRate</span> <span class="operator">=</span> annualRate.divide(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;365&quot;</span>), <span class="number">10</span>, RoundingMode.HALF_UP);</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">interest</span> <span class="operator">=</span> principal.multiply(dailyRate)</span><br><span class="line">                                      .multiply(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(days));</span><br><span class="line">        <span class="keyword">return</span> roundAmount(interest); <span class="comment">// æœ€ç»ˆç»“æœå››èˆäº”å…¥</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ©æ¯è®¡ç®—</span></span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">interest</span> <span class="operator">=</span> calculateInterest(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;10000.00&quot;</span>), </span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.035&quot;</span>), <span class="comment">// å¹´åˆ©ç‡3.5%</span></span><br><span class="line">            <span class="number">30</span></span><br><span class="line">        );</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ©æ¯: Â¥&quot;</span> + interest); <span class="comment">// è¾“å‡º: åˆ©æ¯: Â¥28.77</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// é‡‘é¢æ ¼å¼åŒ–</span></span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">rawAmount</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;123.4567&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;åŸå§‹: &quot;</span> + rawAmount + <span class="string">&quot; â†’ æ ¼å¼åŒ–: Â¥&quot;</span> + roundAmount(rawAmount));</span><br><span class="line">        <span class="comment">// è¾“å‡º: åŸå§‹: 123.4567 â†’ æ ¼å¼åŒ–: Â¥123.46</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-ä¸åŒé‡‘èåœºæ™¯çš„èˆå…¥ç­–ç•¥"><a href="#2-ä¸åŒé‡‘èåœºæ™¯çš„èˆå…¥ç­–ç•¥" class="headerlink" title="2. ä¸åŒé‡‘èåœºæ™¯çš„èˆå…¥ç­–ç•¥"></a>2. ä¸åŒé‡‘èåœºæ™¯çš„èˆå…¥ç­–ç•¥</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FinancialScenarios</span> &#123;</span><br><span class="line">    <span class="comment">// åœºæ™¯1: é“¶è¡Œå®¶èˆå…¥æ³• (ç”¨äºé«˜ç²¾åº¦è®¡ç®—ï¼Œå‡å°‘åå·®)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">bankersRound</span><span class="params">(BigDecimal value)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> value.setScale(<span class="number">2</span>, RoundingMode.HALF_EVEN);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åœºæ™¯2: æ‰‹ç»­è´¹è®¡ç®— (æ°¸è¿œå‘ä¸Šèˆå…¥ï¼Œä¿è¯é“¶è¡Œæ”¶ç›Š)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">calculateFee</span><span class="params">(BigDecimal amount, BigDecimal rate)</span> &#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">fee</span> <span class="operator">=</span> amount.multiply(rate);</span><br><span class="line">        <span class="comment">// æ‰‹ç»­è´¹æœ€å°‘0.01å…ƒï¼Œå‘ä¸Šèˆå…¥</span></span><br><span class="line">        <span class="keyword">return</span> fee.setScale(<span class="number">2</span>, RoundingMode.UP).max(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.01&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åœºæ™¯3: å®¢æˆ·è®©åˆ©è®¡ç®— (å‘ä¸‹èˆå…¥ï¼Œè®©åˆ©ç»™å®¢æˆ·)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">calculateDiscount</span><span class="params">(BigDecimal amount, BigDecimal discountRate)</span> &#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">discount</span> <span class="operator">=</span> amount.multiply(discountRate);</span><br><span class="line">        <span class="keyword">return</span> discount.setScale(<span class="number">2</span>, RoundingMode.DOWN);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åœºæ™¯4: ç¨åŠ¡è®¡ç®— (ä¸¥æ ¼çš„å››èˆäº”å…¥)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">calculateTax</span><span class="params">(BigDecimal amount, BigDecimal taxRate)</span> &#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">tax</span> <span class="operator">=</span> amount.multiply(taxRate);</span><br><span class="line">        <span class="keyword">return</span> tax.setScale(<span class="number">2</span>, RoundingMode.HALF_UP);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">amount</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;100.125&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;é“¶è¡Œå®¶èˆå…¥: &quot;</span> + bankersRound(amount));          <span class="comment">// 100.12 (å°¾æ•°5å‰æ˜¯2ï¼Œå¶æ•°)</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰‹ç»­è´¹(1%): &quot;</span> + calculateFee(amount, <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.01&quot;</span>)));     <span class="comment">// 1.01 (å‘ä¸Š)</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æŠ˜æ‰£(10%): &quot;</span> + calculateDiscount(amount, <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.1&quot;</span>))); <span class="comment">// 10.01 (å‘ä¸‹)</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ç¨è´¹(13%): &quot;</span> + calculateTax(amount, <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.13&quot;</span>)));     <span class="comment">// 13.02 (å››èˆäº”å…¥)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-é™¤æ³•è¿ç®—çš„ç²¾åº¦æ§åˆ¶-å…³é”®"><a href="#3-é™¤æ³•è¿ç®—çš„ç²¾åº¦æ§åˆ¶-å…³é”®" class="headerlink" title="3. é™¤æ³•è¿ç®—çš„ç²¾åº¦æ§åˆ¶ (å…³é”®!)"></a>3. é™¤æ³•è¿ç®—çš„ç²¾åº¦æ§åˆ¶ (å…³é”®!)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DivisionPrecision</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®‰å…¨çš„é™¤æ³•è¿ç®— (é‡‘èåœºæ™¯å¿…é¡»æŒ‡å®šç²¾åº¦å’Œèˆå…¥æ¨¡å¼)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dividend è¢«é™¤æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> divisor é™¤æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> scale å°æ•°ä½æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">safeDivide</span><span class="params">(BigDecimal dividend, BigDecimal divisor, <span class="type">int</span> scale)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (divisor.compareTo(BigDecimal.ZERO) == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArithmeticException</span>(<span class="string">&quot;é™¤æ•°ä¸èƒ½ä¸ºé›¶&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dividend.divide(divisor, scale, RoundingMode.HALF_UP);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¡ç®—å¹´åŒ–æ”¶ç›Šç‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> profit æ”¶ç›Š</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> principal æœ¬é‡‘</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> days æŒæœ‰å¤©æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">calculateAnnualizedReturn</span><span class="params">(BigDecimal profit, </span></span><br><span class="line"><span class="params">                                                       BigDecimal principal, </span></span><br><span class="line"><span class="params">                                                       <span class="type">int</span> days)</span> &#123;</span><br><span class="line">        <span class="comment">// æ€»æ”¶ç›Šç‡</span></span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">totalReturn</span> <span class="operator">=</span> safeDivide(profit, principal, <span class="number">6</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¹´åŒ–æ”¶ç›Šç‡</span></span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">annualized</span> <span class="operator">=</span> totalReturn</span><br><span class="line">            .multiply(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;365&quot;</span>))</span><br><span class="line">            .divide(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(days), <span class="number">6</span>, RoundingMode.HALF_UP);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è½¬æ¢ä¸ºç™¾åˆ†æ¯”ï¼Œä¿ç•™4ä½å°æ•°</span></span><br><span class="line">        <span class="keyword">return</span> annualized.multiply(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;100&quot;</span>))</span><br><span class="line">                         .setScale(<span class="number">4</span>, RoundingMode.HALF_UP);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// é”™è¯¯ç¤ºä¾‹: æœªæŒ‡å®šç²¾åº¦ä¼šå¯¼è‡´å¼‚å¸¸</span></span><br><span class="line">        <span class="comment">// BigDecimal result = new BigDecimal(&quot;10&quot;).divide(new BigDecimal(&quot;3&quot;)); // ArithmeticException</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ­£ç¡®åšæ³•</span></span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">result</span> <span class="operator">=</span> safeDivide(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;10&quot;</span>), <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;3&quot;</span>), <span class="number">4</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;10 Ã· 3 = &quot;</span> + result); <span class="comment">// 3.3333</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¹´åŒ–æ”¶ç›Šç‡è®¡ç®—</span></span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">annualReturn</span> <span class="operator">=</span> calculateAnnualizedReturn(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;1500&quot;</span>), </span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;100000&quot;</span>), </span><br><span class="line">            <span class="number">180</span></span><br><span class="line">        );</span><br><span class="line">        System.out.println(<span class="string">&quot;å¹´åŒ–æ”¶ç›Šç‡: &quot;</span> + annualReturn + <span class="string">&quot;%&quot;</span>); <span class="comment">// çº¦3.0417%</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="âš ï¸-é‡‘èè®¡ç®—é»„é‡‘æ³•åˆ™"><a href="#âš ï¸-é‡‘èè®¡ç®—é»„é‡‘æ³•åˆ™" class="headerlink" title="âš ï¸ é‡‘èè®¡ç®—é»„é‡‘æ³•åˆ™"></a>âš ï¸ é‡‘èè®¡ç®—é»„é‡‘æ³•åˆ™</h2><ol>
<li> <strong>æ°¸è¿œä¸è¦ä½¿ç”¨ <code>double</code>/<code>float</code></strong> è¿›è¡Œé‡‘èè®¡ç®—</li>
<li><strong>å§‹ç»ˆä½¿ç”¨ <code>String</code> æ„é€  <code>BigDecimal</code></strong><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£ç¡®</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”™è¯¯ (ç²¾åº¦å·²ä¸¢å¤±!)</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="number">0.1</span>);</span><br></pre></td></tr></table></figure></li>
<li><strong>é™¤æ³•å¿…é¡»æŒ‡å®šç²¾åº¦å’Œèˆå…¥æ¨¡å¼</strong><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¿…é¡»ä¸‰å‚æ•°ç‰ˆæœ¬</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">result</span> <span class="operator">=</span> a.divide(b, <span class="number">6</span>, RoundingMode.HALF_UP);</span><br></pre></td></tr></table></figure></li>
<li><strong>è®¾ç½®ç»Ÿä¸€ç²¾åº¦ä¸Šä¸‹æ–‡</strong><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MathContext</span> <span class="variable">mc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MathContext</span>(<span class="number">10</span>, RoundingMode.HALF_UP);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;123.456789&quot;</span>, mc);</span><br></pre></td></tr></table></figure></li>
<li><strong>é‡‘é¢æ¯”è¾ƒä½¿ç”¨ <code>compareTo()</code></strong><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (amount1.compareTo(amount2) &gt; <span class="number">0</span>) &#123; <span class="comment">// å¤§äº</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="ğŸ”§-å®ç”¨å·¥å…·ç±»"><a href="#ğŸ”§-å®ç”¨å·¥å…·ç±»" class="headerlink" title="ğŸ”§ å®ç”¨å·¥å…·ç±»"></a>ğŸ”§ å®ç”¨å·¥å…·ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">MoneyUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MONEY_SCALE</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">RoundingMode</span> <span class="variable">DEFAULT_ROUNDING</span> <span class="operator">=</span> RoundingMode.HALF_UP;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">MoneyUtil</span><span class="params">()</span> &#123;&#125; <span class="comment">// å·¥å…·ç±»ï¼Œé˜²æ­¢å®ä¾‹åŒ–</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// é‡‘é¢æ ¼å¼åŒ– (æ·»åŠ åƒåˆ†ä½)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">format</span><span class="params">(BigDecimal amount)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (amount == <span class="literal">null</span>) <span class="keyword">return</span> <span class="string">&quot;Â¥0.00&quot;</span>;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">rounded</span> <span class="operator">=</span> amount.setScale(MONEY_SCALE, DEFAULT_ROUNDING);</span><br><span class="line">        <span class="type">DecimalFormat</span> <span class="variable">formatter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;Â¥#,###.##&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> formatter.format(rounded);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å®‰å…¨çš„åŠ æ³• (å¤„ç†null)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">safeAdd</span><span class="params">(BigDecimal a, BigDecimal b)</span> &#123;</span><br><span class="line">        a = (a == <span class="literal">null</span>) ? BigDecimal.ZERO : a;</span><br><span class="line">        b = (b == <span class="literal">null</span>) ? BigDecimal.ZERO : b;</span><br><span class="line">        <span class="keyword">return</span> a.add(b).setScale(MONEY_SCALE, DEFAULT_ROUNDING);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ‰¹é‡æ±‚å’Œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">sum</span><span class="params">(BigDecimal... amounts)</span> &#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">total</span> <span class="operator">=</span> BigDecimal.ZERO;</span><br><span class="line">        <span class="keyword">for</span> (BigDecimal amount : amounts) &#123;</span><br><span class="line">            total = safeAdd(total, amount);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç™¾åˆ†æ¯”è®¡ç®—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">percentage</span><span class="params">(BigDecimal part, BigDecimal total)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (total.compareTo(BigDecimal.ZERO) == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> BigDecimal.ZERO;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> part.multiply(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;100&quot;</span>))</span><br><span class="line">                   .divide(total, <span class="number">4</span>, DEFAULT_ROUNDING); <span class="comment">// ä¿ç•™4ä½å°æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(format(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;1234567.895&quot;</span>))); <span class="comment">// Â¥1,234,567.90</span></span><br><span class="line">        System.out.println(safeAdd(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;100.001&quot;</span>), <span class="literal">null</span>)); <span class="comment">// 100.00</span></span><br><span class="line">        System.out.println(percentage(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;25&quot;</span>), <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;200&quot;</span>))); <span class="comment">// 12.5000</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è®°ä½ï¼š<strong>é‡‘èè®¡ç®—æ— å°äº‹</strong>ï¼Œé”™è¯¯çš„èˆå…¥å¯èƒ½å¯¼è‡´ç´¯è®¡è¯¯å·®ã€ç›‘ç®¡ä¸åˆè§„æˆ–è´¢åŠ¡æŸå¤±ã€‚åœ¨å¼€å§‹ç¼–ç å‰ï¼ŒåŠ¡å¿…ä¸ä¸šåŠ¡éƒ¨é—¨ç¡®è®¤å…·ä½“çš„èˆå…¥è§„åˆ™ã€‚</p>
<p>é‡‘èè¡Œä¸šçš„Javaæ•°å€¼è®¡ç®—æœ‰ä¹æ¡ä¸å¯è¿èƒŒçš„â€œé“å¾‹â€ï¼Œè¿åä»»ä½•ä¸€æ¡éƒ½å¯èƒ½å¯¼è‡´èµ„é‡‘æŸå¤±ã€ç›‘ç®¡å¤„ç½šæˆ–ç³»ç»Ÿæ•…éšœã€‚</p>
<h2 id="ğŸ“œ-ä¹å¤§æ ¸å¿ƒé“å¾‹"><a href="#ğŸ“œ-ä¹å¤§æ ¸å¿ƒé“å¾‹" class="headerlink" title="ğŸ“œ ä¹å¤§æ ¸å¿ƒé“å¾‹"></a>ğŸ“œ ä¹å¤§æ ¸å¿ƒé“å¾‹</h2><h3 id="é“å¾‹1ï¼šç»å¯¹ç¦ç”¨æµ®ç‚¹å‹"><a href="#é“å¾‹1ï¼šç»å¯¹ç¦ç”¨æµ®ç‚¹å‹" class="headerlink" title="é“å¾‹1ï¼šç»å¯¹ç¦ç”¨æµ®ç‚¹å‹"></a>é“å¾‹1ï¼š<strong>ç»å¯¹ç¦ç”¨æµ®ç‚¹å‹</strong></h3><blockquote>
<p>é‡‘èè®¡ç®—ä¸­æ°¸è¿œä¸è¦ä½¿ç”¨ <code>float</code> æˆ– <code>double</code></p>
</blockquote>
<p><strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> <span class="variable">price</span> <span class="operator">=</span> <span class="number">0.1</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">quantity</span> <span class="operator">=</span> <span class="number">0.2</span>;</span><br><span class="line">System.out.println(price + quantity); <span class="comment">// è¾“å‡ºï¼š0.30000000000000004 âŒ</span></span><br></pre></td></tr></table></figure>

<p><strong>æ­£ç¡®åšæ³•</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">price</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.1&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">quantity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.2&quot;</span>);</span><br><span class="line">System.out.println(price.add(quantity)); <span class="comment">// è¾“å‡ºï¼š0.3 âœ…</span></span><br></pre></td></tr></table></figure>

<h3 id="é“å¾‹2ï¼šå­—ç¬¦ä¸²æ„é€ BigDecimal"><a href="#é“å¾‹2ï¼šå­—ç¬¦ä¸²æ„é€ BigDecimal" class="headerlink" title="é“å¾‹2ï¼šå­—ç¬¦ä¸²æ„é€ BigDecimal"></a>é“å¾‹2ï¼š<strong>å­—ç¬¦ä¸²æ„é€ BigDecimal</strong></h3><blockquote>
<p>å¿…é¡»ä½¿ç”¨ <code>String</code> æ„é€ å‡½æ•°ï¼Œç¦ç”¨ <code>double</code> æ„é€ å‡½æ•°</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¾éš¾æ€§é”™è¯¯</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">wrong</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="number">0.1</span>); <span class="comment">// å†…éƒ¨å·²æ˜¯0.100000000000000005551115...</span></span><br><span class="line"><span class="comment">// æ­£ç¡®åšæ³•</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">correct</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.1&quot;</span>);</span><br><span class="line"><span class="comment">// æˆ–ä½¿ç”¨valueOfï¼ˆå†…éƒ¨è°ƒç”¨toStringï¼‰</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">alsoCorrect</span> <span class="operator">=</span> BigDecimal.valueOf(<span class="number">0.1</span>); <span class="comment">// ä»…é€‚ç”¨äºdoubleå­—é¢é‡</span></span><br></pre></td></tr></table></figure>

<h3 id="é“å¾‹3ï¼šé™¤æ³•å¿…é¡»æŒ‡å®šç²¾åº¦"><a href="#é“å¾‹3ï¼šé™¤æ³•å¿…é¡»æŒ‡å®šç²¾åº¦" class="headerlink" title="é“å¾‹3ï¼šé™¤æ³•å¿…é¡»æŒ‡å®šç²¾åº¦"></a>é“å¾‹3ï¼š<strong>é™¤æ³•å¿…é¡»æŒ‡å®šç²¾åº¦</strong></h3><blockquote>
<p><code>divide()</code> å¿…é¡»ä½¿ç”¨ä¸‰å‚æ•°ç‰ˆæœ¬ï¼Œæ˜ç¡®èˆå…¥æ¨¡å¼</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">dividend</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;10&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">divisor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼šæŠ›å‡ºArithmeticException âŒ</span></span><br><span class="line"><span class="comment">// BigDecimal result = dividend.divide(divisor);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®ï¼šæŒ‡å®šå°æ•°ä½æ•°å’Œèˆå…¥è§„åˆ™ âœ…</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">result</span> <span class="operator">=</span> dividend.divide(divisor, <span class="number">8</span>, RoundingMode.HALF_UP); <span class="comment">// 3.33333333</span></span><br></pre></td></tr></table></figure>

<h3 id="é“å¾‹4ï¼šèˆå…¥æ¨¡å¼å¿…é¡»æ˜ç¡®"><a href="#é“å¾‹4ï¼šèˆå…¥æ¨¡å¼å¿…é¡»æ˜ç¡®" class="headerlink" title="é“å¾‹4ï¼šèˆå…¥æ¨¡å¼å¿…é¡»æ˜ç¡®"></a>é“å¾‹4ï¼š<strong>èˆå…¥æ¨¡å¼å¿…é¡»æ˜ç¡®</strong></h3><blockquote>
<p>é‡‘èä¸šåŠ¡å¿…é¡»æ ¹æ®åœºæ™¯é€‰æ‹©èˆå…¥æ¨¡å¼</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">FinancialRounding</span> &#123;</span><br><span class="line">    INTEREST(RoundingMode.HALF_UP),      <span class="comment">// åˆ©æ¯è®¡ç®—ï¼šå››èˆäº”å…¥</span></span><br><span class="line">    TAX(RoundingMode.HALF_UP),           <span class="comment">// ç¨è´¹è®¡ç®—ï¼šå››èˆäº”å…¥</span></span><br><span class="line">    BANKERS(RoundingMode.HALF_EVEN),     <span class="comment">// ç»Ÿè®¡è®¡ç®—ï¼šé“¶è¡Œå®¶èˆå…¥</span></span><br><span class="line">    PENALTY(RoundingMode.UP),            <span class="comment">// ç½šé‡‘è®¡ç®—ï¼šå‘ä¸Šå–æ•´</span></span><br><span class="line">    DISCOUNT(RoundingMode.DOWN);         <span class="comment">// æŠ˜æ‰£è®¡ç®—ï¼šå‘ä¸‹å–æ•´</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RoundingMode mode;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é“å¾‹5ï¼šç»Ÿä¸€ç²¾åº¦ç®¡ç†"><a href="#é“å¾‹5ï¼šç»Ÿä¸€ç²¾åº¦ç®¡ç†" class="headerlink" title="é“å¾‹5ï¼šç»Ÿä¸€ç²¾åº¦ç®¡ç†"></a>é“å¾‹5ï¼š<strong>ç»Ÿä¸€ç²¾åº¦ç®¡ç†</strong></h3><blockquote>
<p>ä½¿ç”¨ <code>MathContext</code> ç»Ÿä¸€ç®¡ç†è®¡ç®—ç²¾åº¦</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰å…¨å±€é‡‘èè®¡ç®—ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">FinancialContext</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">MathContext</span> <span class="variable">MC_CURRENCY</span> <span class="operator">=</span> </span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MathContext</span>(<span class="number">34</span>, RoundingMode.HALF_UP); <span class="comment">// 34ä½ç²¾åº¦ï¼Œè¶³å¤Ÿè´§å¸è®¡ç®—</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">MathContext</span> <span class="variable">MC_PERCENTAGE</span> <span class="operator">=</span> </span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MathContext</span>(<span class="number">10</span>, RoundingMode.HALF_UP); <span class="comment">// ç™¾åˆ†æ¯”è®¡ç®—</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸å…è®¸å®ä¾‹åŒ–</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">FinancialContext</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;123.4567890123456789012345678901234&quot;</span>, </span><br><span class="line">                                   FinancialContext.MC_CURRENCY);</span><br></pre></td></tr></table></figure>

<h3 id="é“å¾‹6ï¼šæ¯”è¾ƒå¿…é¡»ç”¨compareTo"><a href="#é“å¾‹6ï¼šæ¯”è¾ƒå¿…é¡»ç”¨compareTo" class="headerlink" title="é“å¾‹6ï¼šæ¯”è¾ƒå¿…é¡»ç”¨compareTo"></a>é“å¾‹6ï¼š<strong>æ¯”è¾ƒå¿…é¡»ç”¨compareTo</strong></h3><blockquote>
<p>ç¦æ­¢ä½¿ç”¨ <code>equals()</code> æ¯”è¾ƒé‡‘é¢</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;100.00&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;100.000&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”™è¯¯ï¼šequalsæ¯”è¾ƒç²¾åº¦ï¼Œä¼šå¯¼è‡´æ„å¤–ç»“æœ</span></span><br><span class="line">System.out.println(a.equals(b)); <span class="comment">// false âŒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®ï¼šcompareToæ¯”è¾ƒæ•°å€¼</span></span><br><span class="line">System.out.println(a.compareTo(b) == <span class="number">0</span>); <span class="comment">// true âœ…</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡‘é¢æ¯”è¾ƒæ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareAmount</span><span class="params">(BigDecimal amount1, BigDecimal amount2)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> amount1.setScale(<span class="number">2</span>, RoundingMode.HALF_UP)</span><br><span class="line">                  .compareTo(amount2.setScale(<span class="number">2</span>, RoundingMode.HALF_UP));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é“å¾‹7ï¼šé›¶å€¼å¿…é¡»ç”¨BigDecimal-ZERO"><a href="#é“å¾‹7ï¼šé›¶å€¼å¿…é¡»ç”¨BigDecimal-ZERO" class="headerlink" title="é“å¾‹7ï¼šé›¶å€¼å¿…é¡»ç”¨BigDecimal.ZERO"></a>é“å¾‹7ï¼š<strong>é›¶å€¼å¿…é¡»ç”¨BigDecimal.ZERO</strong></h3><blockquote>
<p>ç¦æ­¢ä½¿ç”¨ <code>new BigDecimal(0)</code></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯ âŒ</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">zero</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="number">0</span>);    <span class="comment">// æ¯æ¬¡åˆ›å»ºæ–°å¯¹è±¡</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">zero2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0&quot;</span>); <span class="comment">// æ¯æ¬¡åˆ›å»ºæ–°å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡® âœ…</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">zero3</span> <span class="operator">=</span> BigDecimal.ZERO;     <span class="comment">// å•ä¾‹ï¼Œæ€§èƒ½æ›´å¥½</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">zero4</span> <span class="operator">=</span> BigDecimal.ZERO;</span><br><span class="line">System.out.println(zero3 == zero4);     <span class="comment">// trueï¼ŒåŒä¸€å¯¹è±¡</span></span><br></pre></td></tr></table></figure>

<h3 id="é“å¾‹8ï¼šåºåˆ—åŒ–å¿…é¡»ä¿æŒç²¾åº¦"><a href="#é“å¾‹8ï¼šåºåˆ—åŒ–å¿…é¡»ä¿æŒç²¾åº¦" class="headerlink" title="é“å¾‹8ï¼šåºåˆ—åŒ–å¿…é¡»ä¿æŒç²¾åº¦"></a>é“å¾‹8ï¼š<strong>åºåˆ—åŒ–å¿…é¡»ä¿æŒç²¾åº¦</strong></h3><blockquote>
<p>JSON/æ•°æ®åº“ä¼ è¾“å¿…é¡»ä¿æŒå®Œæ•´ç²¾åº¦</p>
</blockquote>
<p><strong>JSONåºåˆ—åŒ–é…ç½®</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JsonSerialize(using = BigDecimalSerializer.class)</span></span><br><span class="line"><span class="meta">@JsonDeserialize(using = BigDecimalDeserializer.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FinancialDTO</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal amount;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰åºåˆ—åŒ–å™¨</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">BigDecimalSerializer</span> <span class="keyword">extends</span> <span class="title class_">JsonSerializer</span>&lt;BigDecimal&gt; &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(BigDecimal value, JsonGenerator gen, </span></span><br><span class="line"><span class="params">                            SerializerProvider provider)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">            <span class="comment">// ä¿æŒå®Œæ•´ç²¾åº¦åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">            gen.writeString(value.toPlainString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ•°æ®åº“æ˜ å°„</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;transactions&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Transaction</span> &#123;</span><br><span class="line">    <span class="meta">@Column(name = &quot;amount&quot;, precision = 34, scale = 8)</span> <span class="comment">// 34ä½ç²¾åº¦ï¼Œ8ä½å°æ•°</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal amount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é“å¾‹9ï¼šè¾¹ç•Œæ¡ä»¶å¿…é¡»å¤„ç†"><a href="#é“å¾‹9ï¼šè¾¹ç•Œæ¡ä»¶å¿…é¡»å¤„ç†" class="headerlink" title="é“å¾‹9ï¼šè¾¹ç•Œæ¡ä»¶å¿…é¡»å¤„ç†"></a>é“å¾‹9ï¼š<strong>è¾¹ç•Œæ¡ä»¶å¿…é¡»å¤„ç†</strong></h3><blockquote>
<p>å¿…é¡»å¤„ç†æº¢å‡ºã€é™¤é›¶ã€nullå€¼</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">FinancialCalculator</span> &#123;</span><br><span class="line">    <span class="comment">// å®‰å…¨é™¤æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">safeDivide</span><span class="params">(BigDecimal dividend, BigDecimal divisor, </span></span><br><span class="line"><span class="params">                                       <span class="type">int</span> scale, RoundingMode rounding)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (dividend == <span class="literal">null</span> || divisor == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;å‚æ•°ä¸èƒ½ä¸ºnull&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (divisor.compareTo(BigDecimal.ZERO) == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArithmeticException</span>(<span class="string">&quot;é™¤æ•°ä¸èƒ½ä¸ºé›¶&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dividend.divide(divisor, scale, rounding);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å®‰å…¨åŠ æ³•ï¼ˆé˜²æº¢å‡ºï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">safeAdd</span><span class="params">(BigDecimal a, BigDecimal b)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> a.add(b);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">            <span class="comment">// è®°å½•å®¡è®¡æ—¥å¿—</span></span><br><span class="line">            auditLogger.error(<span class="string">&quot;åŠ æ³•æº¢å‡º&quot;</span>, e);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">FinancialException</span>(<span class="string">&quot;é‡‘é¢è®¡ç®—æº¢å‡ºï¼Œè¯·æ‹†åˆ†å¤„ç†&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ¦-é‡‘èä¸šåŠ¡ä¸“ç”¨è®¡ç®—æ¨¡å¼"><a href="#ğŸ¦-é‡‘èä¸šåŠ¡ä¸“ç”¨è®¡ç®—æ¨¡å¼" class="headerlink" title="ğŸ¦ é‡‘èä¸šåŠ¡ä¸“ç”¨è®¡ç®—æ¨¡å¼"></a>ğŸ¦ é‡‘èä¸šåŠ¡ä¸“ç”¨è®¡ç®—æ¨¡å¼</h2><h3 id="æ¨¡å¼ä¸€ï¼šåˆ©æ¯è®¡ç®—å¥—ä»¶"><a href="#æ¨¡å¼ä¸€ï¼šåˆ©æ¯è®¡ç®—å¥—ä»¶" class="headerlink" title="æ¨¡å¼ä¸€ï¼šåˆ©æ¯è®¡ç®—å¥—ä»¶"></a>æ¨¡å¼ä¸€ï¼š<strong>åˆ©æ¯è®¡ç®—å¥—ä»¶</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterestCalculator</span> &#123;</span><br><span class="line">    <span class="comment">// æ—¥æ¯è®¡ç®—ï¼ˆå®é™…/365ï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">calculateDailyInterest</span><span class="params">(BigDecimal principal, </span></span><br><span class="line"><span class="params">                                                   BigDecimal annualRate, </span></span><br><span class="line"><span class="params">                                                   <span class="type">int</span> days)</span> &#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">dailyRate</span> <span class="operator">=</span> annualRate.divide(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;365&quot;</span>), </span><br><span class="line">                                                <span class="number">10</span>, RoundingMode.HALF_UP);</span><br><span class="line">        <span class="keyword">return</span> principal.multiply(dailyRate)</span><br><span class="line">                       .multiply(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(days))</span><br><span class="line">                       .setScale(<span class="number">2</span>, RoundingMode.HALF_UP);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤åˆ©è®¡ç®—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title function_">calculateCompound</span><span class="params">(BigDecimal principal,</span></span><br><span class="line"><span class="params">                                              BigDecimal annualRate,</span></span><br><span class="line"><span class="params">                                              <span class="type">int</span> periods)</span> &#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">ratePerPeriod</span> <span class="operator">=</span> annualRate.divide(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(periods),</span><br><span class="line">                                                    <span class="number">10</span>, RoundingMode.HALF_UP);</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">multiplier</span> <span class="operator">=</span> BigDecimal.ONE.add(ratePerPeriod);</span><br><span class="line">        <span class="keyword">return</span> principal.multiply(multiplier.pow(periods))</span><br><span class="line">                       .setScale(<span class="number">2</span>, RoundingMode.HALF_UP);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¨¡å¼äºŒï¼šç¨åŠ¡è®¡ç®—å¼•æ“"><a href="#æ¨¡å¼äºŒï¼šç¨åŠ¡è®¡ç®—å¼•æ“" class="headerlink" title="æ¨¡å¼äºŒï¼šç¨åŠ¡è®¡ç®—å¼•æ“"></a>æ¨¡å¼äºŒï¼š<strong>ç¨åŠ¡è®¡ç®—å¼•æ“</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TaxCalculator</span> &#123;</span><br><span class="line">    <span class="comment">// å¢å€¼ç¨è®¡ç®—ï¼ˆä¸åŒç¨ç‡ï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> BigDecimal <span class="title function_">calculateVAT</span><span class="params">(BigDecimal amount, TaxRate rate)</span> &#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">tax</span> <span class="operator">=</span> amount.multiply(rate.getRate())</span><br><span class="line">                              .setScale(<span class="number">2</span>, RoundingMode.HALF_UP);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ»¡è¶³æœ€å°çº³ç¨å•ä½ï¼ˆåˆ†ï¼‰</span></span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">minTaxUnit</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.01&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (tax.compareTo(minTaxUnit) &lt; <span class="number">0</span> &amp;&amp; tax.compareTo(BigDecimal.ZERO) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> minTaxUnit; <span class="comment">// ä¸è¶³1åˆ†æŒ‰1åˆ†è®¡</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> tax;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¨¡å¼ä¸‰ï¼šé‡‘é¢æ ¼å¼åŒ–æ ‡å‡†"><a href="#æ¨¡å¼ä¸‰ï¼šé‡‘é¢æ ¼å¼åŒ–æ ‡å‡†" class="headerlink" title="æ¨¡å¼ä¸‰ï¼šé‡‘é¢æ ¼å¼åŒ–æ ‡å‡†"></a>æ¨¡å¼ä¸‰ï¼š<strong>é‡‘é¢æ ¼å¼åŒ–æ ‡å‡†</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MoneyFormatter</span> &#123;</span><br><span class="line">    <span class="comment">// é‡‘é¢æ ¼å¼åŒ–ï¼ˆå«åƒåˆ†ä½ã€è´§å¸ç¬¦å·ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">DecimalFormat</span> <span class="variable">CNY_FORMAT</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;Â¥#,##0.00&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">DecimalFormat</span> <span class="variable">USD_FORMAT</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;$#,##0.00&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// å›ºå®šèˆå…¥æ¨¡å¼</span></span><br><span class="line">        CNY_FORMAT.setRoundingMode(RoundingMode.HALF_UP);</span><br><span class="line">        USD_FORMAT.setRoundingMode(RoundingMode.HALF_UP);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">formatCNY</span><span class="params">(BigDecimal amount)</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (CNY_FORMAT) &#123;</span><br><span class="line">            <span class="keyword">return</span> CNY_FORMAT.format(amount);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ”-å®¡è®¡ä¸ç›‘æ§"><a href="#ğŸ”-å®¡è®¡ä¸ç›‘æ§" class="headerlink" title="ğŸ” å®¡è®¡ä¸ç›‘æ§"></a>ğŸ” å®¡è®¡ä¸ç›‘æ§</h2><h3 id="è®¡ç®—å®¡è®¡æ—¥å¿—"><a href="#è®¡ç®—å®¡è®¡æ—¥å¿—" class="headerlink" title="è®¡ç®—å®¡è®¡æ—¥å¿—"></a>è®¡ç®—å®¡è®¡æ—¥å¿—</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FinancialCalculationAudit</span> &#123;</span><br><span class="line">    <span class="meta">@Around(&quot;@annotation(AuditedCalculation)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">auditCalculation</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> joinPoint.proceed();</span><br><span class="line">        <span class="type">long</span> <span class="variable">duration</span> <span class="operator">=</span> System.nanoTime() - start;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®°å½•è®¡ç®—è¯¦æƒ…ï¼ˆå®¡è®¡è¦æ±‚ï¼‰</span></span><br><span class="line">        auditLogger.info(<span class="string">&quot;é‡‘èè®¡ç®—å®¡è®¡ - æ–¹æ³•: &#123;&#125;, å‚æ•°: &#123;&#125;, ç»“æœ: &#123;&#125;, è€—æ—¶: &#123;&#125;ns&quot;</span>,</span><br><span class="line">                        joinPoint.getSignature().getName(),</span><br><span class="line">                        Arrays.toString(joinPoint.getArgs()),</span><br><span class="line">                        result, duration);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç²¾åº¦ç›‘æ§å‘Šè­¦"><a href="#ç²¾åº¦ç›‘æ§å‘Šè­¦" class="headerlink" title="ç²¾åº¦ç›‘æ§å‘Šè­¦"></a>ç²¾åº¦ç›‘æ§å‘Šè­¦</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrecisionMonitor</span> &#123;</span><br><span class="line">    <span class="comment">// ç›‘æ§ç²¾åº¦æŸå¤±</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">monitorPrecisionLoss</span><span class="params">(BigDecimal original, BigDecimal calculated)</span> &#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">diff</span> <span class="operator">=</span> original.subtract(calculated).abs();</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">tolerance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.00000001&quot;</span>); <span class="comment">// å®¹å¿åº¦</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (diff.compareTo(tolerance) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            alertService.sendPrecisionAlert(original, calculated, diff);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ“Š-é“å¾‹æ£€æŸ¥æ¸…å•"><a href="#ğŸ“Š-é“å¾‹æ£€æŸ¥æ¸…å•" class="headerlink" title="ğŸ“Š é“å¾‹æ£€æŸ¥æ¸…å•"></a>ğŸ“Š é“å¾‹æ£€æŸ¥æ¸…å•</h2><table>
<thead>
<tr>
<th>æ£€æŸ¥é¡¹</th>
<th>é€šè¿‡æ ‡å‡†</th>
<th>æ£€æŸ¥æ–¹æ³•</th>
</tr>
</thead>
<tbody><tr>
<td><strong>æµ®ç‚¹å‹ä½¿ç”¨</strong></td>
<td>ä»£ç ä¸­æ—  <code>float</code>/<code>double</code> é‡‘èè®¡ç®—</td>
<td>é™æ€ä»£ç æ‰«æ</td>
</tr>
<tr>
<td><strong>BigDecimalæ„é€ </strong></td>
<td>å…¨éƒ¨ä½¿ç”¨ <code>String</code> æ„é€ å‡½æ•°</td>
<td>ä»£ç å®¡æŸ¥</td>
</tr>
<tr>
<td><strong>é™¤æ³•ç²¾åº¦</strong></td>
<td>æ‰€æœ‰é™¤æ³•è°ƒç”¨éƒ½æœ‰èˆå…¥æ¨¡å¼</td>
<td>è¿è¡Œæ—¶ç›‘æ§</td>
</tr>
<tr>
<td><strong>èˆå…¥ä¸€è‡´æ€§</strong></td>
<td>åŒä¸šåŠ¡ä½¿ç”¨ç›¸åŒèˆå…¥æ¨¡å¼</td>
<td>ä¸šåŠ¡éªŒè¯</td>
</tr>
<tr>
<td><strong>é›¶å€¼å¼•ç”¨</strong></td>
<td>ä½¿ç”¨ <code>BigDecimal.ZERO</code> å•ä¾‹</td>
<td>ä»£ç æ£€æŸ¥</td>
</tr>
<tr>
<td><strong>æ¯”è¾ƒæ–¹æ³•</strong></td>
<td>ä½¿ç”¨ <code>compareTo()</code> è€Œé <code>equals()</code></td>
<td>å•å…ƒæµ‹è¯•</td>
</tr>
<tr>
<td><strong>åºåˆ—åŒ–ç²¾åº¦</strong></td>
<td>JSON/DBä¼ è¾“ä¿æŒå®Œæ•´ç²¾åº¦</td>
<td>é›†æˆæµ‹è¯•</td>
</tr>
<tr>
<td><strong>è¾¹ç•Œå¤„ç†</strong></td>
<td>é™¤é›¶ã€æº¢å‡ºã€nullå€¼éƒ½æœ‰å¤„ç†</td>
<td>å¼‚å¸¸æµ‹è¯•</td>
</tr>
<tr>
<td><strong>å®¡è®¡æ—¥å¿—</strong></td>
<td>å…³é”®è®¡ç®—éƒ½æœ‰å®¡è®¡è®°å½•</td>
<td>æ—¥å¿—æ£€æŸ¥</td>
</tr>
</tbody></table>
<h2 id="ğŸ’-ç»ˆæåŸåˆ™"><a href="#ğŸ’-ç»ˆæåŸåˆ™" class="headerlink" title="ğŸ’ ç»ˆæåŸåˆ™"></a>ğŸ’ ç»ˆæåŸåˆ™</h2><p>è®°ä½è¿™ä¸‰æ¡ä¸å¯å¦¥åçš„åŸåˆ™ï¼š</p>
<ol>
<li> <strong>ç²¾åº¦é«˜äºæ€§èƒ½</strong>ï¼šå®æ„¿æ…¢ï¼Œä¸èƒ½é”™</li>
<li> <strong>å®¡è®¡é«˜äºä¾¿åˆ©</strong>ï¼šæ¯ä¸€æ­¥éƒ½è¦å¯è¿½æº¯</li>
<li> <strong>åˆè§„é«˜äºä¸€åˆ‡</strong>ï¼šå¿…é¡»æ»¡è¶³ç›‘ç®¡è¦æ±‚</li>
</ol>
<p>é‡‘èç³»ç»Ÿçš„æ•°å€¼è®¡ç®—ä¸æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œè€Œæ˜¯<strong>é£é™©æ§åˆ¶é—®é¢˜</strong>ã€‚æ¯ä¸€æ¬¡è®¡ç®—éƒ½æ¶‰åŠçœŸå®èµ„é‡‘ï¼Œä»»ä½•è¯¯å·®éƒ½æ˜¯ä¸å¯æ¥å—çš„ã€‚</p>
<p>å®Œ~</p>

  </div>
</article>


    <div class="blog-post-comments">
        <div id="utterances_thread">
            <noscript>åŠ è½½è¯„è®ºéœ€è¦åœ¨æµè§ˆå™¨å¯ç”¨ JavaScript è„šæœ¬æ”¯æŒã€‚</noscript>
        </div>
    </div>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/blog/">é¦–é¡µ</a></li>
         
          <li><a href="/blog/about/">å…³äº</a></li>
         
          <li><a href="/blog/archives/">å½’æ¡£</a></li>
         
          <li><a href="/blog/categories/">åˆ†ç±»</a></li>
         
          <li><a href="/blog/search/">æœç´¢</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/shenjy06">é¡¹ç›®</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%8A-%E6%A0%B8%E5%BF%83%E8%A6%81%E7%82%B9%EF%BC%9ARoundingMode-%E6%9E%9A%E4%B8%BE"><span class="toc-number">1.</span> <span class="toc-text">ğŸ“Š æ ¸å¿ƒè¦ç‚¹ï¼šRoundingMode æšä¸¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%92%B0-%E9%87%91%E8%9E%8D%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-number">2.</span> <span class="toc-text">ğŸ’° é‡‘èä¸šåŠ¡ä»£ç ç¤ºä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5-%E9%87%91%E9%A2%9D%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">2.1.</span> <span class="toc-text">1. åŸºç¡€å››èˆäº”å…¥ (é‡‘é¢æ ¼å¼åŒ–)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%8D%E5%90%8C%E9%87%91%E8%9E%8D%E5%9C%BA%E6%99%AF%E7%9A%84%E8%88%8D%E5%85%A5%E7%AD%96%E7%95%A5"><span class="toc-number">2.2.</span> <span class="toc-text">2. ä¸åŒé‡‘èåœºæ™¯çš„èˆå…¥ç­–ç•¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%99%A4%E6%B3%95%E8%BF%90%E7%AE%97%E7%9A%84%E7%B2%BE%E5%BA%A6%E6%8E%A7%E5%88%B6-%E5%85%B3%E9%94%AE"><span class="toc-number">2.3.</span> <span class="toc-text">3. é™¤æ³•è¿ç®—çš„ç²¾åº¦æ§åˆ¶ (å…³é”®!)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E9%87%91%E8%9E%8D%E8%AE%A1%E7%AE%97%E9%BB%84%E9%87%91%E6%B3%95%E5%88%99"><span class="toc-number">3.</span> <span class="toc-text">âš ï¸ é‡‘èè®¡ç®—é»„é‡‘æ³•åˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%A7-%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">4.</span> <span class="toc-text">ğŸ”§ å®ç”¨å·¥å…·ç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%9C-%E4%B9%9D%E5%A4%A7%E6%A0%B8%E5%BF%83%E9%93%81%E5%BE%8B"><span class="toc-number">5.</span> <span class="toc-text">ğŸ“œ ä¹å¤§æ ¸å¿ƒé“å¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B1%EF%BC%9A%E7%BB%9D%E5%AF%B9%E7%A6%81%E7%94%A8%E6%B5%AE%E7%82%B9%E5%9E%8B"><span class="toc-number">5.1.</span> <span class="toc-text">é“å¾‹1ï¼šç»å¯¹ç¦ç”¨æµ®ç‚¹å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B2%EF%BC%9A%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9E%84%E9%80%A0BigDecimal"><span class="toc-number">5.2.</span> <span class="toc-text">é“å¾‹2ï¼šå­—ç¬¦ä¸²æ„é€ BigDecimal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B3%EF%BC%9A%E9%99%A4%E6%B3%95%E5%BF%85%E9%A1%BB%E6%8C%87%E5%AE%9A%E7%B2%BE%E5%BA%A6"><span class="toc-number">5.3.</span> <span class="toc-text">é“å¾‹3ï¼šé™¤æ³•å¿…é¡»æŒ‡å®šç²¾åº¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B4%EF%BC%9A%E8%88%8D%E5%85%A5%E6%A8%A1%E5%BC%8F%E5%BF%85%E9%A1%BB%E6%98%8E%E7%A1%AE"><span class="toc-number">5.4.</span> <span class="toc-text">é“å¾‹4ï¼šèˆå…¥æ¨¡å¼å¿…é¡»æ˜ç¡®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B5%EF%BC%9A%E7%BB%9F%E4%B8%80%E7%B2%BE%E5%BA%A6%E7%AE%A1%E7%90%86"><span class="toc-number">5.5.</span> <span class="toc-text">é“å¾‹5ï¼šç»Ÿä¸€ç²¾åº¦ç®¡ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B6%EF%BC%9A%E6%AF%94%E8%BE%83%E5%BF%85%E9%A1%BB%E7%94%A8compareTo"><span class="toc-number">5.6.</span> <span class="toc-text">é“å¾‹6ï¼šæ¯”è¾ƒå¿…é¡»ç”¨compareTo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B7%EF%BC%9A%E9%9B%B6%E5%80%BC%E5%BF%85%E9%A1%BB%E7%94%A8BigDecimal-ZERO"><span class="toc-number">5.7.</span> <span class="toc-text">é“å¾‹7ï¼šé›¶å€¼å¿…é¡»ç”¨BigDecimal.ZERO</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B8%EF%BC%9A%E5%BA%8F%E5%88%97%E5%8C%96%E5%BF%85%E9%A1%BB%E4%BF%9D%E6%8C%81%E7%B2%BE%E5%BA%A6"><span class="toc-number">5.8.</span> <span class="toc-text">é“å¾‹8ï¼šåºåˆ—åŒ–å¿…é¡»ä¿æŒç²¾åº¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%81%E5%BE%8B9%EF%BC%9A%E8%BE%B9%E7%95%8C%E6%9D%A1%E4%BB%B6%E5%BF%85%E9%A1%BB%E5%A4%84%E7%90%86"><span class="toc-number">5.9.</span> <span class="toc-text">é“å¾‹9ï¼šè¾¹ç•Œæ¡ä»¶å¿…é¡»å¤„ç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8F%A6-%E9%87%91%E8%9E%8D%E4%B8%9A%E5%8A%A1%E4%B8%93%E7%94%A8%E8%AE%A1%E7%AE%97%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.</span> <span class="toc-text">ğŸ¦ é‡‘èä¸šåŠ¡ä¸“ç”¨è®¡ç®—æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E4%B8%80%EF%BC%9A%E5%88%A9%E6%81%AF%E8%AE%A1%E7%AE%97%E5%A5%97%E4%BB%B6"><span class="toc-number">6.1.</span> <span class="toc-text">æ¨¡å¼ä¸€ï¼šåˆ©æ¯è®¡ç®—å¥—ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E4%BA%8C%EF%BC%9A%E7%A8%8E%E5%8A%A1%E8%AE%A1%E7%AE%97%E5%BC%95%E6%93%8E"><span class="toc-number">6.2.</span> <span class="toc-text">æ¨¡å¼äºŒï¼šç¨åŠ¡è®¡ç®—å¼•æ“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E4%B8%89%EF%BC%9A%E9%87%91%E9%A2%9D%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A0%87%E5%87%86"><span class="toc-number">6.3.</span> <span class="toc-text">æ¨¡å¼ä¸‰ï¼šé‡‘é¢æ ¼å¼åŒ–æ ‡å‡†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%8D-%E5%AE%A1%E8%AE%A1%E4%B8%8E%E7%9B%91%E6%8E%A7"><span class="toc-number">7.</span> <span class="toc-text">ğŸ” å®¡è®¡ä¸ç›‘æ§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E5%AE%A1%E8%AE%A1%E6%97%A5%E5%BF%97"><span class="toc-number">7.1.</span> <span class="toc-text">è®¡ç®—å®¡è®¡æ—¥å¿—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B2%BE%E5%BA%A6%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6"><span class="toc-number">7.2.</span> <span class="toc-text">ç²¾åº¦ç›‘æ§å‘Šè­¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%8A-%E9%93%81%E5%BE%8B%E6%A3%80%E6%9F%A5%E6%B8%85%E5%8D%95"><span class="toc-number">8.</span> <span class="toc-text">ğŸ“Š é“å¾‹æ£€æŸ¥æ¸…å•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%92%8E-%E7%BB%88%E6%9E%81%E5%8E%9F%E5%88%99"><span class="toc-number">9.</span> <span class="toc-text">ğŸ’ ç»ˆæåŸåˆ™</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&text=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&title=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&is_video=false&description=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜&body=Check out this article: https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&title=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&title=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&title=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&title=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&name=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://shenjy06.github.io/blog/2025/12/12/%E9%87%91%E8%9E%8D%E6%96%B9%E9%9D%A2%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8BigDecimal%E7%9A%84%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/&t=å¦‚ä½•ä½¿ç”¨BigDecimalå¤„ç†é‡‘èé¢†åŸŸé—®é¢˜"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;   2020-2025 Mark Shen
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       -->
        <li>
          <a href="/blog/"
            >é¦–é¡µ</a
          >
        </li>
        <!--
     --><!--
       -->
        <li>
          <a href="/blog/about/"
            >å…³äº</a
          >
        </li>
        <!--
     --><!--
       -->
        <li>
          <a href="/blog/archives/"
            >å½’æ¡£</a
          >
        </li>
        <!--
     --><!--
       -->
        <li>
          <a href="/blog/categories/"
            >åˆ†ç±»</a
          >
        </li>
        <!--
     --><!--
       -->
        <li>
          <a href="/blog/search/"
            >æœç´¢</a
          >
        </li>
        <!--
     --><!--
       -->
        <li>
          <a target="_blank" rel="noopener" href="https://github.com/shenjy06"
            >é¡¹ç›®</a
          >
        </li>
        <!--
     -->
      </ul>
      <ul>
        <!-- Baidu Web Analytics -->
        <script>
          var _hmt = _hmt || []
          ;(function () {
            var hm = document.createElement('script')
            hm.src =
              'https://hm.baidu.com/hm.js?2bf556e2c4bfb436b933c9c12d4a0057'
            var s = document.getElementsByTagName('script')[0]
            s.parentNode.insertBefore(hm, s)
          })()
        </script>
        <!-- End Baidu Web Analytics -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿ï¼\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸï¼");
      e.clearSelection();
    })
  })
  </script>


<script src="/blog/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

  <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?2bf556e2c4bfb436b933c9c12d4a0057";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
        </script>

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

    <script type="text/javascript">
      var utterances_repo = 'shenjy06/blog';
      var utterances_issue_term = 'pathname';
      var utterances_label = 'Comment';
      var utterances_theme = 'github-light';

      (function(){
          var script = document.createElement('script');

          script.src = 'https://utteranc.es/client.js';
          script.setAttribute('repo', utterances_repo);
          script.setAttribute('issue-term', 'pathname');
          script.setAttribute('label', utterances_label);
          script.setAttribute('theme', utterances_theme);
          script.setAttribute('crossorigin', 'anonymous');
          script.async = true;
          (document.getElementById('utterances_thread')).appendChild(script);
      }());
  </script>

</body>
</html>
